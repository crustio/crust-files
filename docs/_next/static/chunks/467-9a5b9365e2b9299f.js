"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[467],{8553:(e,t,r)=>{r.d(t,{Kv:()=>p,Rg:()=>c,_j:()=>d});var n=r(3821),o=r(74638),i=r.n(o),a=r(87998),l=r(80351);let s=new l.y(8),c=e=>new Promise((t,r)=>{let n=new FileReader;n.onload=()=>{n.result&&t(n.result)},n.onerror=r,n.readAsArrayBuffer(e)});function d(e){try{let t=e&&e.trim();if(t){let e=t.split(" ");if(1===e.length&&e[0]){let t=e[0],r=window.atob(t),n=s.phraseFromSecret(r);if(n&&n.split(" ").length>=4)return{secret:t,seeds:n}}else if(e.length>=4){let e=s.secretFromPhrase(t);if(e&&e.split("-").length>=4)return{secret:window.btoa(e),seeds:t}}}return null}catch(e){return null}}function p(){let[e,t]=(0,n.useState)({}),[r,o]=(0,a.e)();(0,n.useEffect)(()=>{let e=i().get("user:crypto");e&&t(e),o(!0)},[]);let s=(0,n.useCallback)(e=>{t(e),i().set("user:crypto",e)},[]),c=(0,n.useCallback)(async()=>{let{secret:e,mnemonics:t}=new l.y(8).genMnemonics(),r={secret:window.btoa(e),seeds:t};return s(r),r},[]);return(0,n.useMemo)(()=>({...e,generate:c,set:s,init:r}),[e,s,r,c])}},27276:(e,t,r)=>{r.d(t,{v:()=>c});var n=r(91933),o=r.n(n),i=r(3821),a=r(35969),l=r(8553),s=r(6271);function c(e,t){let[r,n]=(0,i.useState)(),[c,d]=(0,i.useState)({progress:0,up:!1}),[p,u]=(0,i.useState)(null),[m,f]=(0,i.useState)(!1),{isEncrypt:g=!1,secret:h,file:b,isPremium:v=!1,endpoint:y,pinner:x,pin:w,chainId:j}=t,A=(0,i.useMemo)(()=>v?1024:40,[v]),k=(0,i.useMemo)(()=>{if(!b)return!1;if(b.file)return b.file.size>1048576*A;if(b.files){let e=0;for(let t of b.files)e+=t.size;return e>1048576*A}return!1},[b,A]);return{upload:async t=>{try{let r,i,s,c;n(""),f(!0);let p="aptos-martian"===e.wallet||"aptos-petra"===e.wallet?e.pubKey||"":e.account,m="Basic ".concat(e.authBasic),v="Bearer ".concat(e.authBearer),k=o().CancelToken.source();u(k),d({progress:0,up:!0});let I=new FormData,_=t||b;if(g){if(_.file){let e=new Date().getTime(),t=await (0,l.Rg)(_.file);console.info("readFile::",(new Date().getTime()-e)/1e3);let r=await (0,a.o)(t,h);console.info("encrypted::",(new Date().getTime()-e)/1e3);let n=new Blob([r],{type:_.file.type});I.append("file",n,_.file.name)}else if(_.files)for(let e of _.files){let t=await (0,l.Rg)(e),r=await (0,a.o)(t,h),n=new Blob([r],{type:e.type});I.append("file",n,e.webkitRelativePath)}}else if(_.file)I.append("file",_.file,_.file.name);else if(_.files)for(let e of _.files)I.append("file",e,e._webkitRelativePath||e.webkitRelativePath);let C=y.value,S=await o().request({cancelToken:k.token,data:I,headers:{Authorization:m},maxContentLength:A,method:"POST",onUploadProgress:e=>{let t=e.loaded/e.total;d({progress:Math.round(99*t),up:!0})},params:{pin:!0,"cid-version":1,hash:"sha2-256"},url:"".concat(C,"/api/v0/add")});if("string"==typeof S.data){let e=S.data.replaceAll("}\n{","},{"),t=JSON.parse("[".concat(e,"]")),n=t.length-1;r=t[n],delete t[n],r.items=t}else r=S.data;console.info("upResult:",S),u(null),d({progress:99,up:!0}),w?(c=j,s=await w(r.Hash)):(i=x.value,await o().post("".concat(i,"/psa/pins"),{cid:r.Hash,name:r.Name},{headers:{authorization:v}})),d({progress:100,up:!1});let P={...r,PinEndpoint:i,PinTime:new Date().getTime(),UpEndpoint:C,Encrypted:g,PinTx:s,PinChainId:c},E={msg:p,signature:e.signature};return[P,E]}catch(e){var r;if(d({progress:0,up:!1}),f(!1),console.error(e),(null==e||null==(r=e.data)?void 0:r.code)===-32e3)return void n("Insufficient Wallet Balance!");if((null==e?void 0:e.code)==="ACTION_REJECTED")return void n("User has rejected the operation.");throw n((0,s.Yf)(e)),e}},error:k?"Do not upload files larger than ".concat(A,"MB!"):r,isBusy:m,upState:c,cancelUp:p,fileSizeError:k}}},42972:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(3821),o=r(69221),i=r(87080),a=r(55982),l=r.n(a);function s(){let{t:e}=(0,o.Bd)(),{alert:t}=(0,n.useContext)(i.BR),[r,a]=(0,n.useState)(void 0),s=(0,n.useRef)(),c=(0,n.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];s.current&&(s.current.webkitdirectory=e,s.current.multiple=e,s.current.click())},[s]),d=(0,n.useCallback)(()=>c(!1),[c]),p=(0,n.useCallback)(()=>c(!0),[c]),u=(0,n.useCallback)(r=>{try{console.info("onInputFile:",r.target.files);let n=l().filter(r.target.files||[]),o=l().size(n);if(!n||0==o)return;if(o>2e3)return void t.alert({title:e("Upload"),msg:e("Please do not upload more than 2000 files"),type:"error"});if(0===o)return void t.alert({title:e("Upload"),msg:e("Please select non-empty folder"),type:"error"});if(r.target.webkitdirectory){if(n.length>=1){let e=[];for(let t=0;t<n.length;t++)e.push(n[t]);console.info(e);let[t]=(e[0].webkitRelativePath||"").split("/");t||1!=o?a({files:e,dir:t||"Files"}):a({file:n[0]})}}else a({file:n[0]});r.target.value=""}catch(r){t.alert({title:e("Upload"),msg:"Select file error "+JSON.stringify(r),type:"error"})}},[a,t,e]);return(0,n.useMemo)(()=>({file:r,setFile:a,inputRef:s,_onClickUpFile:d,_onClickUpFolder:p,_onInputFile:u}),[r,s,d,p,u])}},67719:(e,t,r)=>{r.d(t,{A:()=>g});var n=r(29913),o=r(3821),i=r(59544),a=r(23472),l=r(87998),s=r(64875),c=r(55982),d=r.n(c),p=r(11170),u=r.n(p);let m="_null",f=e=>{let{expand:t,list:r,group:o,select:i,onClickItem:a,onClickGroup:l,renderGroupTitle:s=()=>{}}=e,c=o===i.group;return(0,n.jsxs)("div",{className:"group",children:[o!==m&&(s&&s({group:o,select:i,onClickGroup:l})||(0,n.jsxs)("div",{className:u()("title",{active:c}),onClick:l,children:[o," ",(0,n.jsx)("span",{className:"dropIcon cru-fo-chevron-down"})]})),t&&r.map((e,t)=>(0,n.jsx)("div",{className:u()("item",{active:c&&e.value===i.value}),onClick:t=>a(t,{group:o,value:e.value}),children:e.text},"group_item_".concat(t)))]})},g=o.memo((0,a.Ay)(function(e){var t;let{className:r,label:a,help:c,options:p,defaultValue:g,defaultGroup:h=m,renderGroupTitle:b,footer:v}=e,[y,x]=(0,o.useState)({value:g,group:h}),w=(0,o.useMemo)(()=>d().find(p,e=>(e.group||m)===y.group&&e.value===y.value),[p,y]),[j,A]=(0,o.useState)(h),[k,I]=(0,l.e)(),_=(0,s.A)(()=>{k&&I(!1)}),C=(0,o.useMemo)(()=>d().groupBy(p,e=>e.group||m),[p]),S=d().keys(C);return(0,n.jsxs)("div",{className:u()(r,"mdropdown"),onClick:()=>I(),ref:_,children:[a&&(0,n.jsxs)("div",{className:"label font-sans-semibold",children:[a,c&&(0,n.jsx)(i.A,{position:"top center",trigger:(0,n.jsx)("span",{className:"icon cru-fo-help-circle"}),content:c})]}),(0,n.jsx)("span",{className:u()("dropIcon","cru-fo-chevron-down")}),(0,n.jsx)("div",{className:"text font-sans-regular",children:null!=(t=null==w?void 0:w.text)?t:""}),k&&(0,n.jsxs)("div",{className:"options",children:[S.map((t,r)=>(0,n.jsx)(f,{group:t,renderGroupTitle:b,select:y,expand:j===t||t===m,list:C[t],onClickGroup:e=>{A(j===t?m:t),e.stopPropagation()},onClickItem:(t,r)=>{var n;x(r),null==(n=e.onChange)||n.call(e,t,r)}},"group_".concat(r))),v]})]})}).withConfig({componentId:"sc-d8549cd0-0"})(["&.mdropdown{position:relative;width:100%;border-radius:0.57rem;border:1px solid var(--line-color);padding:0.8rem 1rem;cursor:pointer;.label{font-size:1rem;font-weight:600;white-space:nowrap;color:var(--main-color);margin-bottom:0.6rem;.icon{font-size:1.3rem;position:relative;top:0.2rem;margin-left:0.86rem;cursor:pointer;color:var(--secend-color);}}.dropIcon{float:right;position:relative;top:-0.9rem;right:0;}.text{font-size:1rem;color:#999999;}.options{width:100%;background:white;max-height:",";overflow-y:auto;position:absolute;top:calc(100% + 1px);left:0;z-index:10;border-radius:4px;border:1px solid var(--line-color);box-shadow:0 1px 5px rgba(0,0,0,0.3);.group{.title{cursor:pointer;border-top:1px solid var(--line-color);padding:0.8rem 1rem;font-size:1.2rem;font-weight:500;&:hover,&.active{background:var(--line-color);}.dropIcon{float:right;right:0.6rem;top:0rem;}}.item{padding:0.6rem 1.6rem;cursor:pointer;&:hover,&.active{background:var(--line-color);}}}}}"],e=>e.optionsMaxHeight||"300px"))},72146:(e,t,r)=>{r.d(t,{G:()=>c});var n=r(29913),o=r(3821),i=r(23472),a=r(75696),l=r(11170),s=r.n(l);let c=o.memo((0,i.Ay)(function(e){let{className:t,onClickUpFile:r,onClickUpFolder:o,disabled:i}=e;return o?(0,n.jsx)(a.A,{className:s()(t,{disabled:i}),pointing:"top",icon:null,basic:!0,text:"Upload",children:(0,n.jsxs)(a.A.Menu,{children:[(0,n.jsx)(a.A.Item,{text:"File",icon:(0,n.jsx)("span",{className:"icon cru-fo-file"}),onClick:r}),(0,n.jsx)(a.A.Item,{text:"Folder",icon:(0,n.jsx)("span",{className:"icon cru-fo-folder"}),onClick:o})]})}):(0,n.jsx)("div",{className:s()("btn-upload",{disabled:i},t),onClick:r,children:"Upload"})}).withConfig({componentId:"sc-dbde77e9-0"})(["&.btn-upload,&.ui.dropdown>.text.divider{padding:0 4.285714rem;font-family:OpenSans-Medium;font-size:2.571429rem;line-height:6.428571rem;cursor:pointer;border:2px solid #000000;box-sizing:border-box;border-radius:1.714286rem;}&.disabled{background:#EEEEEE;border:unset !important;color:#AAAAAA;cursor:not-allowed;}&.ui.dropdown{.cru-fo{font-size:1.3rem;margin-left:1.1rem;}.menu::after{display:none;}.menu{width:100%;background:#FFFFFF;box-shadow:0 0.57rem 1.43rem 0 rgba(0,0,0,0.1);border:1px solid #EEEEEE;border-radius:0.86rem;padding:0.57rem;.icon{margin-left:1.144286rem;margin-right:1.714286rem;}.item{padding:0.78rem 0.57rem !important;border-radius:0.57rem;font-size:1.285714rem;&:active{background-color:#EEEEEE;}}}}"]))},75317:(e,t,r)=>{r.d(t,{A:()=>H});var n=r(29913),o=r(55982),i=r.n(o),a=r(3821),l=r(69221),s=r(63655),c=r(49403),d=r(50826),p=r(70193),u=r(23472),m=r(87998),f=r(87545),g=r(49238),h=r(56105),b=r(95251);let v=JSON.parse('{"name":"StorageOrder","methods":[{"name":"create","args":[],"returns":{"type":"void"}},{"name":"bootstrap","args":[{"type":"pay","name":"seed"},{"type":"uint64","name":"base_price"},{"type":"uint64","name":"byte_price"},{"type":"uint64","name":"size_limit"},{"type":"uint64","name":"service_rate"},{"type":"uint64","name":"algo_price"},{"type":"uint64","name":"cru_price"}],"returns":{"type":"void"}},{"name":"set_base_price","args":[{"type":"uint64","name":"price"}],"returns":{"type":"void"}},{"name":"set_byte_price","args":[{"type":"uint64","name":"price"}],"returns":{"type":"void"}},{"name":"set_size_limit","args":[{"type":"uint64","name":"size"}],"returns":{"type":"void"}},{"name":"set_service_rate","args":[{"type":"uint64","name":"rate"}],"returns":{"type":"void"}},{"name":"set_algo_cru_price","args":[{"type":"uint64","name":"algo_price"},{"type":"uint64","name":"cru_price"}],"returns":{"type":"void"}},{"name":"add_order_node","args":[{"type":"address","name":"address"}],"returns":{"type":"void"}},{"name":"remove_order_node","args":[{"type":"address","name":"address"}],"returns":{"type":"void"}},{"name":"get_random_order_node","args":[],"returns":{"type":"address"}},{"name":"get_price","args":[{"type":"uint64","name":"size"},{"type":"bool","name":"is_permanent"}],"returns":{"type":"uint64"}},{"name":"place_order","args":[{"type":"pay","name":"seed"},{"type":"account","name":"merchant"},{"type":"string","name":"cid"},{"type":"uint64","name":"size"},{"type":"bool","name":"is_permanent"}],"returns":{"type":"void"}}],"networks":{},"desc":"This is storage order contract used to place order"}');var y=r(46370),x=r(31100),w=r(43783).Buffer;let j=new g.Ay.Algodv2(y.jI.token,y.jI.algodUrl);class A{constructor(){this.base_price=h.gH.from(0),this.byte_price=h.gH.from(0),this.service_rate=h.gH.from(0),this.algo_price=h.gH.from(0),this.cru_price=h.gH.from(0)}}async function k(e,t){let r=await j.getApplicationByID(y.jI.applicationId).do(),n=new A,o=new Set(Object.keys(n));for(let e of r.params["global-state"]){let t=w.from(e.key,"base64").toString();o.has(t)&&(n[t]=h.gH.from(e.value.uint))}let i=n.base_price.add(n.byte_price.mul(e).div(1024).div(1024)).mul(n.service_rate.add(100)).div(100).mul(n.cru_price).div(n.algo_price).div(h.gH.from("1".concat("0".repeat(12))));return t?i.mul(200):i}async function I(e,t,r,n){var o;let a=e.useWallet,l=(o=a.wallet,async(e,t)=>{let r=i().map(t,t=>({txn:e[t]}));return Promise.resolve(await o.signTransaction([r]))}),s=await j.getTransactionParams().do(),c=new g.Ay.ABIContract(v),d=await k(r,n),p=await j.accountInformation(a.account).do();if(h.gH.from(p.amount).lt(d))throw"Insufficient Balance";let u=await _(),m=g.Ay.makePaymentTxnWithSuggestedParamsFromObject({from:a.account,to:y.jI.applicationAddress,amount:BigInt(d.toString()),suggestedParams:s}),f=new g.Ay.AtomicTransactionComposer,b=[];for(let e of(b.push({appIndex:y.jI.applicationId,name:g.Ay.decodeAddress(u).publicKey},{appIndex:y.jI.applicationId,name:new Uint8Array(w.from("nodes"))}),f.addMethodCall({appID:y.jI.applicationId,method:c.getMethodByName("place_order"),methodArgs:[{txn:m,signer:l},u,t,r,n],sender:a.account,signer:l,boxes:b,suggestedParams:s}),(await f.execute(j,4)).methodResults))return e.txID}async function _(){let e="node_num",t=await j.getApplicationByID(y.jI.applicationId).do(),r=g.Ay.ABIType.from("string"),n=r.encode(e).slice(-e.length),o=w.from(n).toString("base64"),i=0;for(let e of t.params["global-state"])if(e.key===o){i=e.value.uint;break}if(0===i)throw Error("No merchant node for algorand user to order.");let a=Math.floor(Math.random()*i),l="nodes",s=r.encode(l).slice(-l.length),c=await j.getApplicationBoxByName(y.jI.applicationId,s).do(),d=new Uint8Array(g.Ay.ABIType.from("uint8[32][30]").decode(c.value)[a].map(e=>Number(e)));return g.Ay.encodeAddress(d)}var C=r(41207),S=r(17390),P=r(88449),E=r.n(P);function N(){var e;return null==(e=(0,x.ZR)().useWallet)?void 0:e.chainId}var z=r(29380),F=r(27276),B=r(64881),D=r(67719),M=r(18041);let R=u.Ay.div.withConfig({componentId:"sc-229e1e04-0"})(["cursor:pointer;height:40px;line-height:40px;color:var(--primary-color);text-align:center;"]),T=()=>{},H=a.memo((0,u.Ay)(function(e){let{wallet:t}=(0,x.ZR)(),{className:r,uc:u,file:g,onClose:v=T,onSuccess:w=T,user:j,type:A,isPremium:_}=e,P="vault"===A,{t:M}=(0,l.Bd)(),{endpoint:H,endpoints:U,onChangeEndpoint:O}=(0,C.e)(),{onChangePinner:W,pinner:G,pins:L}=(0,C.N)(),[Z,J]=(0,m.e)(!0),K=(0,a.useMemo)(()=>{let e=g.file?g.file.size:g.files?i().sumBy(g.files,"size")+1024:0;return 0===e?e:e+Math.round(.2*e)},[g]),{pin:V,fee:Q,chainId:Y}="algorand"===t?function(e,t){let{wallet:r}=(0,x.ZR)(),n=(0,x.ZR)(),[i,l]=(0,a.useState)("-"),s=(0,a.useRef)("");return(0,a.useEffect)(()=>{let n=(0,o.uniqueId)();return s.current=n,l("-"),"algorand"===r&&k(BigInt(e),t).then(e=>{s.current==n&&l(b.formatUnits(e.toString(),6)+" "+(y.P8[y.jI.chainId]||"ETH"))}).catch(console.error),()=>{}},[e,t,r]),{pin:async r=>await I(n,r,BigInt(e),t),chainId:y.jI.chainId,fee:i}}(K,Z):function(e,t){let r=N(),n=function(){let e=function(){let e=(0,x.ZR)();return(0,a.useMemo)(()=>{var t,r;if(null==(t=e.useWallet)?void 0:t.getProvider)return null==(r=e.useWallet)?void 0:r.getProvider()},[e])}(),t=N();return(0,a.useMemo)(()=>{if(!e||null==t)return;let r=y.Qh[t];if(r)return z.PM.getContract(r,y.W_,e.getSigner())},[e,t])}(),{wallet:o,useWallet:i}=(0,x.ZR)(),[l,s]=(0,a.useState)("-"),c=(0,a.useRef)("");(0,a.useEffect)(()=>{let i=E()();return c.current=i,s("-"),("metamask"===o||"coinbase"===o)&&n&&n.getPrice(h.gH.from(e),t).then(e=>{c.current==i&&s((0,S.formatEther)(e)+" "+(y.P8[r]||"ETH"))}).catch(console.error),()=>{}},[e,t,r,o]);let d=async r=>{let o=h.gH.from(e),a=await n.getPrice(o,t),l=[r,o,t];if((await i.getProvider().getBalance(i.account)).lt(a))throw"Insufficient Balance";let s=await n.estimateGas.placeOrder(...l,{value:a}),c=await n.placeOrder(...l,{value:a,gasLimit:s.mul(120).div(100)}),{transactionHash:d}=await c.wait();return d};return{pin:n?d:void 0,chainId:r,fee:l}}(K,Z),q=!!V,X=P&&!!u.secret,{error:$,cancelUp:ee,upState:et,upload:er,isBusy:en,fileSizeError:eo}=(0,F.v)(j,{isEncrypt:!!X,secret:u.secret,file:g,isPremium:_,endpoint:H,pinner:G,pin:V,chainId:Y}),ei=(0,a.useCallback)(()=>{ee&&ee.cancel(),v()},[ee,v]);console.log("filesize error",eo),console.log("isVault error",P),console.log("uc.secret",u.secret),console.log("user.account",j.account),console.log("!user.sign",!j.sign);let ea=eo||P&&!u.secret||!j.account||!j.sign;return(0,n.jsxs)(s.A,{closeIcon:(0,n.jsx)("span",{className:"close icon cru-fo-x"}),onClose:ei,open:!0,size:"large",className:r,children:[(0,n.jsx)(s.A.Header,{className:"font-sans-semisold",children:M(g.dir?"Upload Folder":"Upload File")}),(0,n.jsxs)(s.A.Content,{children:[(0,n.jsxs)(c.A.Group,{children:[(0,n.jsx)(c.A,{fluid:!0,children:(0,n.jsxs)(c.A.Content,{children:[(0,n.jsx)(c.A.Header,{content:g.dir?"Folder":"File"}),(0,n.jsx)(c.A.Description,{content:g.dir?"".concat(g.dir," (").concat(g.files.length," files)"):"".concat(g.file.name," (").concat(g.file.size," bytes)")})]})}),(0,n.jsx)(c.A,{fluid:!0,children:(0,n.jsx)(D.A,{fluid:!0,selection:!0,className:"clear-border",help:M("File streaming and wallet authentication will be processed by the chosen gateway."),disabled:en,label:M("Select a free Web3 IPFS Gateway"),onChange:O,options:U,optionsMaxHeight:"240px",defaultGroup:H.group,defaultValue:H.value,footer:(0,n.jsx)(R,{onClick:()=>window.open("https://wiki.crust.network/docs/en/buildIPFSWeb3AuthGW","_blank"),children:"Contribute IPFS W3Auth Gateway"})})}),q?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.A,{fluid:!0,className:"encryption",children:(0,n.jsxs)(c.A.Content,{children:[(0,n.jsx)(c.A.Header,{content:"Permanent storage"}),(0,n.jsx)(c.A.Description,{style:{color:Z?"transparent":void 0},content:Z?"-":"Non-permanent storage, the guarantee period for the file is only 6 months."}),(0,n.jsx)(d.A,{toggle:!0,defaultChecked:Z,onChange:(e,t)=>{let{checked:r}=t;return J(r)}})]})}),(0,n.jsxs)("div",{style:{padding:"0 20px"},children:["Storage fee: ",Q]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.A,{fluid:!0,children:(0,n.jsx)(D.A,{fluid:!0,selection:!0,className:"clear-border",help:M("Your file will be pinned to IPFS for long-term storage."),disabled:0===L.length,label:M("Select a Web3 IPFS Pinner"),onChange:W,options:L,defaultValue:G.value,footer:(0,n.jsx)(R,{onClick:()=>window.open("https://wiki.crust.network/docs/en/buildIPFSW3AuthPin","_blank"),children:"Contribute IPFS W3Auth Pinner"})})}),(0,n.jsx)(c.A,{fluid:!0,className:"encryption",children:(0,n.jsxs)(c.A.Content,{children:[(0,n.jsx)(c.A.Header,{content:"File Encryption"}),u.secret?(0,n.jsx)(c.A.Description,{content:X?"Yes":"File encryption is disabled in Public Mode."}):(0,n.jsx)(c.A.Description,{content:"Please go to the 'Setting' page and set encryption key before activating this function."}),(0,n.jsx)(d.A,{toggle:!0,defaultChecked:X,disabled:!0})]})})]})]}),$&&(0,n.jsx)("div",{style:{color:"orangered",padding:"1rem",whiteSpace:"pre-wrap",wordBreak:"break-all"},children:$})]}),(0,n.jsx)(s.A.Actions,{children:(0,n.jsxs)("div",{className:"uploading",children:[et.up&&(0,n.jsx)(p.A,{value:et.progress,total:100,active:!0,color:"orange"}),et.up&&(0,n.jsx)(B.A,{onClick:ei,children:M("Cancel")}),!et.up&&(0,n.jsx)(B.A,{fluid:!0,onClick:()=>{ea||er().then(e=>{let[t]=e;return w(t),(0,f.z)({type:2,walletType:j.wallet,address:j.account,data:{cid:t.Hash,fileType:+!!i().size(t.items),strategy:+!!t.Encrypted}})}).catch(console.error)},disabled:ea,children:M("Confirm")})]})})]})}).withConfig({componentId:"sc-229e1e04-1"})(['width:51.43rem !important;.header:nth-child(2){height:3.93rem;font-size:1.3rem !important;padding:0 1.14rem !important;font-weight:600 !important;line-height:3.93rem !important;}.close.icon{top:0.5rem;right:0.6rem;color:#666666;}.content{padding:1rem !important;}.ui.cards > .card{margin:0.5rem !important;.content > .header{font-size:1rem;font-weight:unset !important;color:var(--main-color);font-weight:600;font-family:OpenSans-SemiBold;}.content > .description{font-size:1rem;color:#999999;font-family:OpenSans-Regular;}}.ui.cards > .card:first-child{margin-top:1rem !important;}.toggle-options{cursor:pointer;font-size:10px;color:#999999;line-height:14px;margin-top:8px;margin-left:1.51rem;.cru-fo{font-size:14px;position:relative;top:2px;margin-left:6px;}}.actions{height:4.8rem;padding:0.5rem 1rem 0 1rem !important;border-top:unset !important;background:unset !important;.button{margin-left:unset !important;}}.uploading{height:4rem;display:flex;align-items:center;.progress{margin:0 1rem 0 0 !important;vertical-align:baseline;background:unset !important;border:1px solid orange;flex:1;.bar{min-width:unset !important;height:2.5rem;}}}.card.encryption{position:relative;.toggle{position:absolute;top:calc(50% - 0.75rem);right:1rem;input[type="radio"]:checked + label:before{background-color:#2ed158 !important;}}}',"{width:95% !important;}"],M.TQ))},78690:(e,t,r)=>{r.d(t,{Ay:()=>g});var n=r(29913),o=r(3821),i=r(39889),a=r(17468),l=r(8553),s=r(55982),c=r.n(s),d=r(20692),p=r(23472),u=r(84371),m=r(18041),f=r(31012);let g=o.memo((0,p.Ay)(function(e){let{className:t,pageCount:r=7,files:s,type:p="public",onDeleteItem:m}=e,g=(0,u.useRouter)();(0,f.a)();let h="public"===p,b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,[r,n]=(0,o.useState)(1);return(0,o.useMemo)(()=>{let o=c().chunk(e,t);return{totalPage:o.length,pageList:o[r-1]||[],setPage:n,page:r}},[e,r])}((0,o.useMemo)(()=>s.filter(e=>"public"===p?!e.Encrypted:e.Encrypted),[s,p]),r),v=(0,l.Kv)(),y=b.totalPage>1?2:5;return(0,n.jsx)("div",{className:t,children:(0,n.jsxs)("table",{children:[(0,n.jsx)("thead",{className:"font-sans-semibold",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"File Name"}),(0,n.jsx)("th",{children:"File CID"}),(0,n.jsx)("th",{children:"File Size"}),(0,n.jsx)("th",{children:"Status"}),(0,n.jsx)("th",{children:"Action"}),h&&(0,n.jsx)("th",{})]})}),(0,n.jsx)("tbody",{className:"font-sans-regular",children:b.pageList.map((e,t)=>(0,n.jsx)(d.A,{type:p,onDelete:m,uc:v,file:e},"files_item_".concat(t)))}),(0,n.jsx)("tfoot",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{colSpan:h?y+1:y,className:"btns",children:(0,n.jsxs)("div",{className:"files-tip",children:["The file list is locally cached. If you want to keep this list when switching to another device, please go to ",(0,n.jsx)("span",{onClick:()=>g.push("/setting"),children:"Settings->User Data Management"})," to migrate your user data."]})}),b.totalPage>1&&(0,n.jsx)("td",{colSpan:3,children:(0,n.jsx)(i.A,{totalPages:b.totalPage,activePage:b.page,firstItem:null,lastItem:null,prevItem:{content:(0,n.jsx)(a.A,{name:"angle left"}),icon:!0},nextItem:{content:(0,n.jsx)(a.A,{name:"angle right"}),icon:!0},secondary:!0,onPageChange:(e,t)=>{let{activePage:r}=t;return b.setPage(r)}})})]})})]})})}).withConfig({componentId:"sc-82ee973e-0"})(["padding:1rem 2rem;width:100%;thead{font-size:1.29rem;font-weight:600;th:first-child{padding-left:0.57rem;text-align:left;}th{padding-bottom:.8em;border-bottom:unset;}}table{border-spacing:0;min-width:100%;}tbody{color:var(--secend-color);tr > td{padding:.785em;}tr > td:first-child{padding-left:0.57rem;}tr:nth-child(2n - 1){background-color:#f8f8f8;td:first-child{overflow:hidden;border-top-left-radius:0.57rem;border-bottom-left-radius:0.57rem;text-align:left;}td:last-child{overflow:hidden;border-top-right-radius:0.57rem;border-bottom-right-radius:0.57rem;}}}tfoot{.btns > button{margin-right:1rem !important;}tr > td{padding:8px 0;border-top:solid 1px var(--line-color);border-bottom:solid 1px var(--line-color);}th{border-top:unset !important;}.btns{span{cursor:pointer;color:#808080;}}.btns > i{color:var(--secend-color);cursor:pointer;}.pagination > .item{color:var(--secend-color);padding:0.8rem 1rem !important;min-width:unset !important;border-radius:5rem !important;margin:unset;}.files-tip{font-size:13px;line-height:22px;color:#999999;padding-left:0.57rem;span{color:var(--primary-color);}}}","{overflow-x:auto;padding:16px;box-shadow:0px 0px 16px 0px #0000001A;border-radius:12px;table{min-width:600px;}tfoot > tr{border-top:none;border-bottom:none;}}"],m.TQ))},84702:(e,t,r)=>{r.d(t,{j:()=>p});var n=r(29913),o=r(11170),i=r.n(o),a=r(3821),l=r(53632),s=r(23472),c=r(87998);async function d(e){if(!e.files.length)return null;let t=e.items,r={files:[]},n=1===t.length,o=[];for(let e=0;e<t.length;e++){let i=t[e],a=i.webkitGetAsEntry();a&&a.isDirectory?(n&&(r.dir=a.name),o.push({reader:a.createReader(),path:a.name})):a&&(n?r.file=i.getAsFile():r.files.push(i.getAsFile()))}for(let e of o){let t=await function e(t,r){return new Promise(n=>{let o=[];t.readEntries(async i=>{if(i.length){for(let t of i)t.isFile?o.push(await function(e,t){return new Promise(r=>{e.file(e=>{e._webkitRelativePath="".concat(t,"/").concat(e.name),r(e)})})}(t,r)):t.isDirectory&&(o=o.concat(await e(t.createReader(),"".concat(r,"/").concat(t.name))));o=o.concat(await e(t,r))}n(o)})})}(e.reader,e.path);r.files=r.files.concat(t)}return r}let p=a.memo((0,s.Ay)(function(e){let{className:t}=e,[r,o]=(0,c.e)(),[s,p]=(0,a.useState)(null),u=async t=>{t.preventDefault();let r=await d(t.dataTransfer);console.info("fielInfo:",r),o(!1),r&&e.onDrop&&e.onDrop(r)};return((0,a.useEffect)(()=>{p(document.getElementById("__next"))},[]),(0,a.useEffect)(()=>{if(!s)return;let e=e=>{e.preventDefault(),o(!0)},t=e=>{"_drap_drop_frame"===e.target.id&&o(!1)};return s.addEventListener("dragenter",e),s.addEventListener("dragleave",t),()=>{let r=document.getElementById("_drap_drop_frame");r&&s.removeChild(r),s.removeEventListener("dragenter",e),s.removeEventListener("dragleave",t)}},[s]),s)?l.createPortal((0,n.jsx)("div",{id:"_drap_drop_frame",onDrop:u,onDragOver:e=>e.preventDefault(),className:i()(t,{show:r}),children:"Upload files to this directory"}),s):null}).withConfig({componentId:"sc-bc701bf8-0"})(["position:fixed;width:100vw;height:100vh;z-index:9999999;left:0;top:0;background:rgba(255,255,255,0.7);border:3px dashed #cccccc;box-sizing:border-box;display:none;align-items:center;justify-content:center;font-weight:600;font-size:36px;&.show{display:flex;}"]))},93268:(e,t,r)=>{r.d(t,{V:()=>s});var n=r(3821),o=r(55982),i=r.n(o),a=r(36450),l=r.n(a);function s(e){return(0,n.useMemo)(()=>{let t=e.files.length,r=i().groupBy(e.files,e=>e.Encrypted?"valut":"public");r.public||(r.public=[]),r.valut||(r.valut=[]);let n=i().size(r.public),o=i().size(r.valut);return{count:t,publicCount:n,valutCount:o,publicSize:l()(i().sumBy(r.public,e=>i().toNumber(e.Size))).toUpperCase(),valutSize:l()(i().sumBy(r.valut,e=>i().toNumber(e.Size))).toUpperCase()}},[e.files])}}}]);