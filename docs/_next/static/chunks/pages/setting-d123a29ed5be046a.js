(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[552],{82425:function(e,t,n){"use strict";n.d(t,{b:function(){return E}});var r=n(59499),o=n(50029),a=n(16835),s=n(87794),i=n.n(s),c=n(22751),l=n(67294),u=n(54335),p=n(90356),d=n(10720),m=n(92080),f=n(26111),h=n(42227),g=n(61509),x=n(62020),b=n(42103),v=n(98255),w=n(67994),y=n(19867),j=n(85893);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=(0,u.ZP)(y.Z).withConfig({displayName:"BindAirdrop__BindTypeDropdown",componentId:"sc-1fcwrum-0"})(["&.mdropdown{display:inline-block;vertical-align:top;width:130px !important;border-radius:8px !important;border:1px solid #999999 !important;margin-right:8px !important;line-height:40px;height:40px;padding:0 30px 0 14px;.text{white-space:nowrap;font-size:14px !important;line-height:40px !important;font-weight:500 !important;color:var(--main-color) !important;font-family:OpenSans-Medium sans-serif !important;}.dropIcon{position:absolute;right:11px;top:12px;}.options{.item{line-height:24px;padding:4px 20px;}}}"]),N=["eth","polygon","bsc"],S={eth:{value:"eth",text:"ETH"},polygon:{value:"polygon",text:"Polygon"},bsc:{value:"bsc",text:"BSC (BEP20)"}},P={0:"ETH",1:"BSC",2:"Polygon"};var E=(0,u.ZP)((function(e){var t=e.className,n=(0,p.qD)(),r=n.loading,s=n.api,u=n.alert,y=(0,f.S)(),k=y.isPremiumUser,E=y.user,Z=(0,m.X)((function(){return(0,g.w8)(E.account)}),[E.account,k]),I=(0,a.Z)(Z,2),D=I[0],z=I[1],_=D||[],A=(0,h.F)(""),M=(0,a.Z)(A,2),F=M[0],B=M[1],T=(0,h.F)(""),G=(0,a.Z)(T,2),U=G[0],H=G[1],R=!k||!!U,Y=(0,l.useMemo)((function(){return N.map((function(e){return S[e]}))}),[]),V=(0,l.useState)(N[0]),X=V[0],L=V[1],J=(0,l.useCallback)((function(e,t){var n=t.value;L(n)}),[]),K=function(){var e=(0,o.Z)(i().mark((function e(){var t,n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k){e.next=2;break}return e.abrupt("return");case 2:if(F){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,r.show(),s.setSigner(C({},E.crust.wallet.signer)),t=s.tx.system.remark(JSON.stringify({scope:"crustFiles",env:d.g6,action:"bindExternalAddress",externalAddressType:X,externalAddress:F})),e.next=10,(0,b.iQ)(t,E.account);case 10:s.setSigner(void 0),n=1;case 12:if(!(n<=3)){e.next=23;break}return e.next=15,(0,b._v)(3e3);case 15:return e.next=17,z();case 17:if(!e.sent){e.next=20;break}return e.abrupt("break",23);case 20:n++,e.next=12;break;case 23:r.hide(),e.next=31;break;case 26:e.prev=26,e.t0=e.catch(4),r.hide(),(o=(0,x.az)(e.t0)).includes("account balance too low")?u.warnModal("Insufficient Funds!"):u.error(o);case 31:case"end":return e.stop()}}),e,null,[[4,26]])})));return function(){return e.apply(this,arguments)}}();return(0,j.jsxs)(w.o,{className:t,children:[(0,j.jsx)("div",{className:"title font-sans-semibold",children:"Bind AirDrop Addresses"}),(0,j.jsxs)("div",{className:"text font-sans-regular",children:["Bind your addresses from multi blockchain platforms for potential airdrops. You can submit amandments when you have updates on your addresses.",(0,j.jsx)("br",{}),(0,j.jsx)("br",{}),_.map((function(e,t){return(0,j.jsxs)("div",{children:["Your binded ",P[e.chain_type]," address: ",(0,j.jsx)("span",{className:"bold-text font-sans-semibold",children:e.address})]},"old_ex_".concat(t))})),(0,j.jsx)("br",{})]}),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(O,{selection:!0,icon:(0,j.jsx)("span",{className:"icon cru-fo cru-fo-chevron-down"}),defaultValue:N[0],options:Y,onChange:J}),(0,j.jsx)("input",{disabled:!k,className:"input-eth",spellCheck:"false",value:F,onChange:function(e){B(e.target.value);var t=(0,c.isValidAddress)(e.target.value);H(t?"":"Check Input")}}),U&&(0,j.jsx)("span",{className:"input-EthError",children:U}),(0,j.jsx)("br",{}),(0,j.jsx)(v.Z,{disabled:R,className:"btn",onClick:K,children:"Submit"}),!k&&(0,j.jsx)("span",{className:"submit-tip",children:"Get Premium User to bind your AirDrop addresses."})]})]})})).withConfig({displayName:"BindAirdrop",componentId:"sc-1fcwrum-1"})([".input-eth{vertical-align:top;display:inline-block;min-width:406px;margin-bottom:12px;height:40px;line-height:40px;border:1px solid #999999;font-family:OpenSans-Regular;outline:unset;border-radius:8px;padding-left:16px;padding-right:16px;font-size:10px;&::placeholder{color:#999999;}}.input-EthError{font-size:10px;color:#F37565;margin-left:12px;}.submit-tip{margin-left:12px;font-size:10px;color:var(--secend-color);}.btn{width:544px;height:40px;}","{.input-eth{min-width:100%;}.btn{width:100%;}}"],d.n4)},67994:function(e,t,n){"use strict";n.d(t,{o:function(){return c}});var r=n(67294),o=n(54335),a=n(94184),s=n.n(a),i=n(85893);var c=r.memo((0,o.ZP)((function(e){var t=e.className,n=e.children;return(0,i.jsx)("div",{className:s()(t,"mcard"),children:n})})).withConfig({displayName:"MCard",componentId:"sc-157sg53-0"})(["padding:1.71rem !important;box-shadow:0 0.71rem 1.71rem 0 rgba(0,0,0,0.06) !important;border-radius:1.14rem !important;border:0.07rem solid #EEEEEE !important;margin-top:2.21rem;.title{font-size:1.3rem !important;font-weight:600;color:var(--main-color);padding-bottom:1.14rem;.cru-fo{margin-right:0.8rem;}}.text{font-size:1rem;color:var(--secend-color);line-height:1.57rem;}.icon{margin-left:1rem;font-size:1.428571rem;position:relative;top:3px;cursor:pointer;}.bold-text{color:var(--main-color);}a{text-decoration:underline;line-height:1.2rem;cursor:pointer;}.btns{margin-top:1.7rem;button:first-child{margin-right:1rem;}}"]))},19867:function(e,t,n){"use strict";var r=n(16835),o=n(67294),a=n(33938),s=n(54335),i=n(77572),c=n(51542),l=n(96486),u=n.n(l),p=n(94184),d=n.n(p),m=n(85893),f="_null",h=function(e){var t=e.expand,n=e.list,r=e.group,o=e.select,a=e.onClickItem,s=e.onClickGroup,i=e.renderGroupTitle,c=void 0===i?null:i,l=r===o.group;return(0,m.jsxs)("div",{className:"group",children:[r!==f&&(c&&c({group:r,select:o,onClickGroup:s})||(0,m.jsxs)("div",{className:d()("title",{active:l}),onClick:s,children:[r," ",(0,m.jsx)("span",{className:"dropIcon cru-fo-chevron-down"})]})),t&&n.map((function(e,t){return(0,m.jsx)("div",{className:d()("item",{active:l&&e.value===o.value}),onClick:function(t){return a(t,{group:r,value:e.value})},children:e.text},"group_item_".concat(t))}))]})};t.Z=o.memo((0,s.ZP)((function(e){var t,n=e.className,s=e.label,l=e.help,p=e.options,g=e.defaultValue,x=e.defaultGroup,b=void 0===x?f:x,v=e.renderGroupTitle,w=e.footer,y=(0,o.useState)({value:g,group:b}),j=y[0],k=y[1],C=(0,o.useMemo)((function(){return u().find(p,(function(e){return(e.group||f)===j.group&&e.value===j.value}))}),[p,j]),O=(0,o.useState)(b),N=O[0],S=O[1],P=(0,i.O)(),E=(0,r.Z)(P,2),Z=E[0],I=E[1],D=(0,c.Z)((function(){Z&&I(!1)})),z=(0,o.useMemo)((function(){return u().groupBy(p,(function(e){return e.group||f}))}),[p]),_=u().keys(z);return(0,m.jsxs)("div",{className:d()(n,"mdropdown"),onClick:function(){return I()},ref:D,children:[s&&(0,m.jsxs)("div",{className:"label font-sans-semibold",children:[s,l&&(0,m.jsx)(a.Z,{position:"top center",trigger:(0,m.jsx)("span",{className:"icon cru-fo-help-circle"}),content:l})]}),(0,m.jsx)("span",{className:d()("dropIcon","cru-fo-chevron-down")}),(0,m.jsx)("div",{className:"text font-sans-regular",children:null!==(t=null===C||void 0===C?void 0:C.text)&&void 0!==t?t:""}),Z&&(0,m.jsxs)("div",{className:"options",children:[_.map((function(t,n){return(0,m.jsx)(h,{group:t,renderGroupTitle:v,select:j,expand:N===t||t===f,list:z[t],onClickGroup:function(e){S(N===t?f:t),e.stopPropagation()},onClickItem:function(t,n){k(n),e.onChange(t,n)}},"group_".concat(n))})),w]})]})})).withConfig({displayName:"MDropdown",componentId:"sc-1nmwkbf-0"})(["&.mdropdown{position:relative;width:100%;border-radius:0.57rem;border:1px solid var(--line-color);padding:0.8rem 1rem;cursor:pointer;.label{font-size:1rem;font-weight:600;white-space:nowrap;color:var(--main-color);margin-bottom:0.6rem;.icon{font-size:1.3rem;position:relative;top:0.2rem;margin-left:0.86rem;cursor:pointer;color:var(--secend-color);}}.dropIcon{float:right;position:relative;top:-0.9rem;right:0;}.text{font-size:1rem;color:#999999;}.options{width:100%;background:white;max-height:",";overflow-y:auto;position:absolute;top:calc(100% + 1px);left:0;z-index:10;border-radius:4px;border:1px solid var(--line-color);box-shadow:0 1px 5px rgba(0,0,0,0.3);.group{.title{cursor:pointer;border-top:1px solid var(--line-color);padding:0.8rem 1rem;font-size:1.2rem;font-weight:500;&:hover,&.active{background:var(--line-color);}.dropIcon{float:right;right:0.6rem;top:0rem;}}.item{padding:0.6rem 1.6rem;cursor:pointer;&:hover,&.active{background:var(--line-color);}}}}}"],(function(e){return e.optionsMaxHeight||"300px"})))},82675:function(e,t,n){"use strict";n.d(t,{MH:function(){return b},hC:function(){return x},vZ:function(){return g}});var r=n(59499),o=n(50029),a=n(16835),s=n(87794),i=n.n(s),c=n(67294),l=n(58971),u=n.n(l),p=n(77572);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=n(21994).Cypher,h=new f(8),g=function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){r.result&&t(r.result)},r.onerror=n,r.readAsArrayBuffer(e)}))};function x(e){try{var t=e&&e.trim();if(t){var n=t.split(" ");if(1===n.length&&n[0]){var r=n[0],o=window.atob(r),a=h.phraseFromSecret(o);if(a&&a.split(" ").length>=4)return{secret:r,seeds:a}}else if(n.length>=4){var s=h.secretFromPhrase(t);if(s&&s.split("-").length>=4)return{secret:window.btoa(s),seeds:t}}}return null}catch(i){return null}}function b(){var e=(0,c.useState)({}),t=e[0],n=e[1],r=(0,p.O)(),s=(0,a.Z)(r,2),l=s[0],d=s[1];(0,c.useEffect)((function(){var e=u().get("user:crypto");e&&n(e),d(!0)}),[]);var h=(0,c.useCallback)((function(e){n(e),u().set("user:crypto",e)}),[]),g=(0,c.useCallback)((0,o.Z)(i().mark((function e(){var t,n,r,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new f(8),n=t.genMnemonics(),r=n.secret,o=n.mnemonics,a={secret:window.btoa(r),seeds:o},h(a),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),[]);return(0,c.useMemo)((function(){return m(m({},t),{},{generate:g,set:h,init:l})}),[t,h,l,g])}},65572:function(e,t,n){"use strict";n.d(t,{z:function(){return d}});var r=n(59499),o=n(16835),a=n(67294),s=n(58971),i=n.n(s),c=n(92080);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=[{text:"https://ipfs.io",value:"https://ipfs.io"},{text:"https://crustgateway.online",value:"https://crustgateway.online"},{text:"https://gw.w3ipfs.org.cn",value:"https://gw.w3ipfs.org.cn"}];function d(){var e=(0,a.useState)({gateway:"https://ipfs.io"}),t=e[0],n=e[1],r=(0,a.useState)(p),s=r[0],l=r[1];(0,a.useEffect)((function(){var e=i().get("downloadgateway");e&&n(e),i().get("allDownloadGateways"),s&&l(s)}),[]);var d=(0,a.useCallback)((function(e){var t={gateway:e};n(t),i().set("downloadgateway",t)}),[]),m=(0,c.X)((function(){return fetch("https://gist.githubusercontent.com/XueMoMo/2cfc982ce6aefb85e09313b714a029bd/raw/CrustFilesDownloadGateway.json").then((function(e){return e.json()})).then((function(e){return e.map((function(e){return{text:e,value:e}}))}))}),[]),f=(0,o.Z)(m,1)[0];return(0,a.useEffect)((function(){f&&f.length&&(i().set("allDownloadGateways",f),l(f))}),[f]),(0,a.useMemo)((function(){return u(u({},t),{},{set:d,allDownloadGateways:s})}),[t,d,s])}},42227:function(e,t,n){"use strict";n.d(t,{F:function(){return o}});var r=n(67294);function o(e){var t=(0,r.useState)(e),n=t[0],o=t[1],a=(0,r.useState)({safe:!0})[0];(0,r.useEffect)((function(){return a.safe=!0,function(){a.safe=!1}}));return[n,function(e){a.safe&&o(e)}]}},48218:function(e,t,n){"use strict";n.d(t,{D:function(){return c}});var r=n(67294),o=n(96486),a=n.n(o),s=n(56755),i=n.n(s);function c(e){return(0,r.useMemo)((function(){var t=e.files.length,n=a().groupBy(e.files,(function(e){return e.Encrypted?"valut":"public"}));return n.public||(n.public=[]),n.valut||(n.valut=[]),{count:t,publicCount:a().size(n.public),valutCount:a().size(n.valut),publicSize:i()(a().sumBy(n.public,(function(e){return a().toNumber(e.Size)}))).toUpperCase(),valutSize:i()(a().sumBy(n.valut,(function(e){return a().toNumber(e.Size)}))).toUpperCase()}}),[e.files])}},64617:function(e,t,n){"use strict";n.r(t),n.d(t,{StorageChainConfig:function(){return J},default:function(){return q}});var r=n(50029),o=n(27812),a=n(16835),s=n(87794),i=n.n(s),c=n(94184),l=n.n(c),u=n(93162),p=n.n(u),d=n(11163),m=n(67294),f=n(81960),h=n(44623),g=n(7046),x=n(49147),b=n(27416),v=n(54335),w=n(37918),y=n.n(w),j=n(82425),k=n(98255),C=n(19867),O=n(59499),N=n(4730),S=n(79795),P=n(60416),E=n(82675),Z=n(85893),I=["alert","onSuccess","toggleOpen"];function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,O.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=m.memo((0,v.ZP)((function(e){var t=e.alert,n=e.onSuccess,r=e.toggleOpen,o=(0,N.Z)(e,I),a=(0,m.useState)(""),s=a[0],i=a[1],c=(0,m.useCallback)((function(e,t){var n=t.value;i(n)}),[]),l=(0,m.useCallback)((function(){var e=(0,E.hC)(s);e?(n(e),r(!1)):t.error("Please check input value")}),[s,t]),u=(0,m.useCallback)((function(){i(""),r(!1)}),[]);return(0,Z.jsxs)(S.Z,z(z({closeIcon:(0,Z.jsx)("span",{className:"close icon cru-fo-x"}),onClose:u},o),{},{children:[(0,Z.jsx)(S.Z.Header,{content:"Input a new key"}),(0,Z.jsxs)(S.Z.Content,{children:[(0,Z.jsx)(P.Z,{fluid:!0,onChange:c}),(0,Z.jsxs)("div",{className:"btns",children:[(0,Z.jsx)(k.Z,{content:"Input",onClick:l}),(0,Z.jsx)(k.Z,{content:"Cancel",onClick:function(){return r(!1)}})]})]})]}))})).withConfig({displayName:"ModalNewKey",componentId:"sc-crca66-0"})(["width:34.3rem !important;.header{height:3.93rem;font-size:1.3rem !important;padding:0 1.14rem !important;font-weight:600 !important;line-height:3.93rem !important;}.close.icon{top:0.5rem;right:0.6rem;color:#666666;}.content{padding:1rem !important;input{border:0.07rem solid #CCCCCC !important;border-radius:0.57rem !important;}.btns{padding-top:2.3rem;button{width:calc(50% - 0.5rem) !important;margin:unset;}button:first-child{margin-right:1rem;}}}"])),A=n(1716),M=n(90356),F=n(31798),B=n(65572),T=n(26111),G=n(77572),U=n(48218),H=n(2375),R=n(10720),Y=n(75982),V=n(48764).Buffer;function X(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){throw e})),f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){i=!0,a=e})),f:function(){try{s||null==n.return||n.return()}finally{if(i)throw a}}}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var J={chainId:"0x5afe",chainName:"Oasis Sapphire",nativeCurrency:{name:"ROSE",symbol:"ROSE",decimals:18},rpcUrls:["https://sapphire.oasis.io/"],blockExplorerUrls:["https://explorer.sapphire.oasis.io"]},K=[{type:"function",stateMutability:"nonpayable",outputs:[],name:"createSecret",inputs:[{type:"string",name:"name",internalType:"string"},{type:"bytes",name:"secret",internalType:"bytes"}]},{type:"function",stateMutability:"view",outputs:[{type:"bytes",name:"",internalType:"bytes"}],name:"revealSecret",inputs:[{type:"string",name:"name",internalType:"string"}]},{type:"event",name:"SecretCreated",inputs:[{type:"address",name:"creator",indexed:!0},{type:"uint256",name:"index",indexed:!1}],anonymous:!1}],W="0x744772c372ea818C0779148CF215C0C642053Ee6";var $=(0,v.ZP)(C.Z).withConfig({displayName:"setting__SelectDownloadGatewayDropdown",componentId:"sc-1rkrrxr-0"})(["&.mdropdown{display:inline-block;vertical-align:top;width:230px !important;border-radius:8px !important;border:1px solid #999999 !important;margin-right:8px !important;line-height:25px;height:25px;padding:0 30px 0 14px;.text{white-space:nowrap;font-size:14 !important;line-height:25px !important;font-weight:500 !important;color:var(--main-color) !important;font-family:OpenSans-SemiBold !important;}.dropIcon{position:absolute;right:11px;top:6px;}.options{.item{line-height:24px;padding:4px 20px;}}}"]),q=m.memo((0,v.ZP)((function(e){var t,n=e.className,s=(0,f.$G)().t,c=(0,E.MH)(),u=(0,B.z)(),v=(0,d.useRouter)(),w=(0,m.useContext)(M.Il).alert,C=(0,G.O)(!1),O=(0,a.Z)(C,2),N=O[0],S=O[1],P=(0,G.O)(),I=(0,a.Z)(P,2),D=I[0],z=I[1];(0,m.useEffect)((function(){c.init&&!c.secret&&z(!0)}),[c]);var R=(0,T.S)(),L=R.user,q=R.isPremiumUser,Q=(0,F.V)(),ee=(0,m.useMemo)((function(){return q?"Premium User":"Trial User"}),[L,q]),te="crust"===L.wallet,ne=(0,H.Yg)(),re=(0,U.D)(ne),oe=re.publicCount,ae=re.publicSize,se=re.valutCount,ie=re.valutSize,ce=(0,m.useRef)(null),le=(0,m.useCallback)((function(){ce.current&&ce.current.click()}),[ce]),ue=(0,m.useCallback)((function(e){try{var t=new FileReader,n=e.target.files;if(!n)return;if(t.readAsText(n[0],"UTF-8"),!/(.json)$/i.test(e.target.value))return w.error(s("File error"));t.onload=function(e){var t,n=JSON.parse(null===(t=e.target)||void 0===t?void 0:t.result),r={files:[]};if(Array.isArray(n))r.files=n;else{if(!n.files||!Array.isArray(n.files))return w.error(s("File content error"));r.secret=n.secret,r.files=n.files}if(c.secret&&r.secret&&r.secret!==c.secret)return w.error("Two secrets were found, and they are different.");if(r.secret){var a=(0,E.hC)(r.secret);a&&c.set(a)}var i,l=[],u={},p=X(r.files);try{for(p.s();!(i=p.n()).done;){var d=i.value;d.Hash&&d.Name&&d.UpEndpoint&&d.PinEndpoint&&(l.push(d),u[d.Hash]=!0)}}catch(f){p.e(f)}finally{p.f()}var m=ne.files.filter((function(e){return!u[e.Hash]}));ne.setFiles([].concat(l,(0,o.Z)(m))),w.alert({msg:s("Import Success"),type:"success"})}}catch(e){w.alert({msg:s("File content error"),type:"error"})}}),[ne,c.set,w,s]),pe=(0,m.useCallback)((function(){var e={files:ne.files,secret:c.secret},t=new Blob([JSON.stringify(e)],{type:"application/json; charset=utf-8"});p().saveAs(t,"backup.json")}),[ne,c]),de=(0,m.useCallback)((0,r.Z)(i().mark((function e(){var t,n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.secret){e.next=27;break}if(t=!1,"undefined"!==typeof window.ethereum&&(t=!0),!(!!t&&window.ethereum.isMetaMask)){e.next=24;break}return e.next=7,window.ethereum.enable();case 7:return e.next=9,fe();case 9:if(!e.sent){e.next=21;break}return n=new(y())(window.ethereum),r=new n.eth.Contract(K,W),e.next=14,n.eth.personal.sign("secret",window.ethereum.selectedAddress,"123456");case 14:return o=e.sent,w.info("Please wait patiently for upload (about 30s)..."),e.next=18,r.methods.createSecret(o.substring(2,12),V.from(c.secret)).send({from:window.ethereum.selectedAddress});case 18:w.info("Your secret key has been uploaded to the Oasis network"),e.next=22;break;case 21:w.error("Change to Oasis error");case 22:e.next=25;break;case 24:w.error("Please make sure you have install Metamask");case 25:e.next=28;break;case 27:w.error("You don't have any secret to upload");case 28:case"end":return e.stop()}}),e)}))),[c]),me=(0,m.useCallback)((0,r.Z)(i().mark((function e(){var t,n,r,o,a,s,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,"undefined"!==typeof window.ethereum&&(t=!0),!(!!t&&window.ethereum.isMetaMask)){e.next=24;break}return e.next=6,window.ethereum.enable();case 6:return e.next=8,fe();case 8:if(!e.sent){e.next=21;break}return n=new(y())(window.ethereum),r=new n.eth.Contract(K,W),console.log(window.ethereum.selectedAddress),e.next=14,n.eth.personal.sign("secret",window.ethereum.selectedAddress,"123456");case 14:return o=e.sent,e.next=17,r.methods.revealSecret(o.substring(2,12)).call();case 17:null!==(a=e.sent)&&""!==a?(s=V.from(a.slice(2),"hex").toString(),console.log(s),(l=(0,E.hC)(s))&&c.set(l)):w.error("You don't have any secrets on Oasis"),e.next=22;break;case 21:w.error("Change to Oasis error");case 22:e.next=25;break;case 24:w.error("Please make sure you have install Metamask");case 25:case"end":return e.stop()}}),e)}))),[c]);function fe(){return he.apply(this,arguments)}function he(){return(he=(0,r.Z)(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.ethereum.request,e.next=3,t({method:"eth_chainId"});case 3:if(n=e.sent,console.log("chainId:".concat(n)),n===J.chainId){e.next=32;break}return e.prev=6,e.next=9,t({method:"wallet_switchEthereumChain",params:[{chainId:J.chainId}]});case 9:case 29:e.next=32;break;case 11:if(e.prev=11,e.t0=e.catch(6),console.log(e.t0),4902!==e.t0.code){e.next=31;break}return e.prev=15,e.next=18,t({method:"wallet_addEthereumChain",params:[J]});case 18:return e.next=20,t({method:"eth_chainId"});case 20:return e.t1=e.sent,e.t2=J.chainId,e.abrupt("return",e.t1==e.t2);case 25:return e.prev=25,e.t3=e.catch(15),console.error(e.t3),e.abrupt("return",!1);case 31:return e.abrupt("return",!1);case 32:return e.abrupt("return",!0);case 33:case"end":return e.stop()}}),e,null,[[6,11],[15,25]])})))).apply(this,arguments)}var ge=(0,m.useState)(""),xe=ge[0],be=ge[1],ve=(0,m.useCallback)((function(e,t){var n=t.value;be(n)}),[]),we=(0,Y.d)();return(0,Z.jsxs)(A.Z,{path:"/setting",className:n,children:[(0,Z.jsx)("input",{onChange:ue,ref:ce,style:{display:"none"},type:"file"}),N&&(0,Z.jsx)(_,{alert:w,size:"tiny",open:!0,toggleOpen:S,onSuccess:c.set}),(0,Z.jsxs)(h.Z,{basic:!0,className:"mcard",children:[(0,Z.jsx)("div",{className:"title font-sans-semibold",children:s("User Profile")}),(0,Z.jsxs)("div",{className:"text font-sans-regular",children:["".concat(s("Web3 Identity Logged-in:")," "),(0,Z.jsx)("span",{className:"bold-text font-sans-semibold",children:L.account})]}),(0,Z.jsxs)("div",{className:"text font-sans-regular",children:["".concat(s("Logged-in Wallet:")," "),(0,Z.jsx)("span",{className:"bold-text font-sans-semibold",children:null===(t=L.useWallet)||void 0===t?void 0:t.name})]}),te&&L.nickName&&(0,Z.jsxs)("div",{className:"text font-sans-regular",children:["".concat(s("Nick Name:")," "),(0,Z.jsx)("span",{className:"bold-text font-sans-semibold",children:L.nickName})]}),(0,Z.jsxs)("div",{className:"text font-sans-regular",children:["".concat(s("User Type:")," "),(0,Z.jsx)("span",{className:"bold-text font-sans-semibold",children:ee})," ",!q&&(0,Z.jsx)("a",{className:"getPreminum",onClick:function(){return v.push("/user")},rel:"noreferrer",children:"Get Premium"})]}),(0,Z.jsxs)("div",{className:"text font-sans-regular",children:["".concat(s("File/Folder Stored:")," ")," ",(0,Z.jsx)("span",{className:"bold-text font-sans-semibold",children:"".concat(oe," in Public, ").concat(se," in Vault")})]}),(0,Z.jsxs)("div",{className:"text font-sans-regular",children:["".concat(s("Space Usage:")," ")," ",(0,Z.jsx)("span",{className:"bold-text font-sans-semibold",children:"".concat(ae," in Public, ").concat(ie," in Vault")})]})]}),(0,Z.jsxs)(h.Z,{basic:!0,className:"mcard",children:[(0,Z.jsx)("div",{className:"title font-sans-semibold",children:s("IPFS Gateway settings for download")}),(0,Z.jsxs)("div",{className:"text font-sans-regular",children:["".concat(s("Default gateway:")," "),(0,Z.jsx)("span",{className:"bold-text font-sans-semibold",children:u.gateway})]}),(0,Z.jsxs)("div",{className:"text font-sans-regular",children:["".concat(s("Select a gateway from community contribution:")," "),(0,Z.jsx)($,{icon:(0,Z.jsx)("span",{className:"dropdown icon"}),options:u.allDownloadGateways,onChange:ve})]}),(0,Z.jsx)("div",{className:"text font-sans-regular",children:"Customized:"}),(0,Z.jsx)("input",{className:"input-dowload-gateway",spellCheck:"false",onChange:function(e){be(e.target.value)},placeholder:s("Customize your download gateway")}),(0,Z.jsx)(k.Z,{content:s("Save"),style:{height:25,lineHeight:"0px"},onClick:function(){null!=xe&&""!=xe?(u.set(xe),w.success("Save success")):w.error("Please give right gateway")}})]}),(0,Z.jsxs)(h.Z,{basic:!0,className:"mcard",children:[(0,Z.jsx)("div",{className:"title font-sans-semibold",children:s("Developer Profile")}),(0,Z.jsxs)("div",{className:"text font-sans-regular",children:["".concat(s("Access token:")," ")," ",(0,Z.jsxs)("span",{className:"bold-text font-sans-semibold",style:{wordBreak:"break-all"},children:[L.authBasic,(0,Z.jsx)("span",{className:"icon cru-fo-copy",onClick:function(){return Q(L.authBasic)}})]})]})]}),(0,Z.jsxs)(h.Z,{basic:!0,className:"mcard",children:[(0,Z.jsx)("div",{className:"title font-sans-semibold",children:s("User Data Management")}),(0,Z.jsxs)("div",{className:"text font-sans-regular",children:["".concat(s("Your user data (including three File Lists and one File Encryption Key) are cached on your local devices. If you want to migrate your user data to a new device, use Export & Import function.")," "),(0,Z.jsx)("span",{style:{color:"#f47e6b"},children:"Attention Please! If you want to switch device or explorer, please follow the following steps: 1) Export your user data from old device/explorer. 2) Log in to Crust Files in your new device/explorer. 3) Import the user data. 4) Enjoy Crust Files! PS: Another way you can spend some ROSE tokens to safely and securely store your private keys on the Oasis sapphire network"})]}),(0,Z.jsxs)(g.Z,{children:[(0,Z.jsx)(x.Z,{active:D,onClick:function(){return z()},children:(0,Z.jsxs)("div",{className:"title font-sans-semibold",children:[s("File Encryption"),(0,Z.jsx)("span",{className:l()("icon",D?"cru-fo-chevron-up":"cru-fo-chevron-down")})]})}),(0,Z.jsxs)(b.Z,{active:D,className:"no-padding",children:[(0,Z.jsxs)("div",{className:"text font-sans-regular",children:["".concat(s("Your File Encryption Key:")," "),c.secret&&(0,Z.jsxs)("span",{className:"bold-text font-sans-semibold",children:[c.secret,(0,Z.jsx)("span",{className:"icon cru-fo-copy",onClick:function(){return Q(c.secret)}})]}),!c.secret&&(0,Z.jsx)("a",{onClick:c.generate,children:"Generate a New"})]}),c.seeds&&(0,Z.jsxs)("div",{className:"text font-sans-regular",children:["".concat(s("Seed Phrase:")," "),(0,Z.jsx)("span",{className:"bold-text font-sans-semibold",children:c.seeds})]})]})]}),(0,Z.jsxs)("div",{className:"btns",children:[(0,Z.jsx)(k.Z,{content:s("Export"),onClick:pe}),(0,Z.jsx)(k.Z,{content:s("Import"),onClick:le}),(0,Z.jsx)(k.Z,{content:s("Upload key to Oasis"),onClick:de}),(0,Z.jsx)(k.Z,{content:s("Download key from Oasis"),onClick:me})]})]}),!we&&(0,Z.jsx)(j.b,{})]})})).withConfig({displayName:"setting",componentId:"sc-1rkrrxr-1"})([".pusl_center_flex_content{min-width:60rem;}.mcard{padding:1.71rem !important;box-shadow:0 0.71rem 1.71rem 0 rgba(0,0,0,0.06) !important;border-radius:1.14rem !important;border:0.07rem solid #EEEEEE !important;margin-top:2.21rem;.title{font-size:1.3rem !important;font-weight:600;color:var(--main-color);padding-bottom:1.14rem;.cru-fo{margin-right:0.8rem;}}.text{font-size:1rem;color:var(--secend-color);line-height:1.57rem;}.icon{margin-left:1rem;font-size:1.428571rem;position:relative;top:3px;cursor:pointer;}.bold-text{color:var(--main-color);}a{text-decoration:underline;line-height:1.2rem;cursor:pointer;}.btns{margin-top:1.7rem;button:{margin-right:1rem;}}.input-dowload-gateway{vertical-align:top;display:inline-block;min-width:406px;margin-bottom:12px;margin-right:12px;height:25px;line-height:25px;border:1px solid #999999;font-family:OpenSans-Regular;outline:unset;border-radius:8px;padding-left:16px;padding-right:16px;font-size:10px;&::placeholder{color:#999999;}}","{.input-dowload-gateway{min-width:unset;}.getPreminum{display:none;}}}"],R.n4))},16238:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/setting",function(){return n(64617)}])},27790:function(){},6567:function(){}},function(e){e.O(0,[543,795,219,618,351,251,35,751,24,716,774,888,179],(function(){return t=16238,e(e.s=t);var t}));var t=e.O();_N_E=t}]);