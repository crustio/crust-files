(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3347],{66028:function(e,t,n){"use strict";n.d(t,{N:function(){return E}});var r=n(30266),i=n(809),o=n.n(i),a=n(6169),c=n(9669),s=n.n(c),u=n(93162),l=n(56755),f=n.n(l),p=n(96486),d=n.n(p),g=n(67294),m=n(1300),h=n(22090),b=n(65382),v=n(29163),x=n(12752),y=n(54040),w=n(65369),k=n(20478),_=n(81496),j=n(59996),C=n(45129),N=n(56262),O=n(99056),P=n(57908),z=n(60954),S=n(85893),E=["https://crustipfs.live","https://crustipfs.art","https://crustipfs.info","https://web3files.world","https://web3files.live","https://storagefiles.site","https://storagefiles.space","https://crustipfs.tech"];function Z(e,t,n){return"".concat(n,"/ipfs/").concat(e.Hash,"?filename=").concat(e.Name)}function D(e,t){return F.apply(this,arguments)}function F(){return(F=(0,r.Z)(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.Cn)(t.Hash,{name:t.Name,encrypted:t.Encrypted,gateway:t.UpEndpoint,fromAccount:n.account,fromWallet:n.wallet,from:n.nickName,isDir:!!t.items});case 2:return r=e.sent,(0,j.H)({type:3,walletType:n.wallet,address:n.account,data:{cid:t.Hash,fileType:t.items?1:0,strategy:t.Encrypted?1:0,shareType:0}}),e.abrupt("return","".concat(window.location.origin,"/share?code=").concat(r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){try{return JSON.parse(JSON.stringify(e))}catch(t){return{expired_at:0,reported_replica_count:0,amount:0,file_size:0,prepaid:!1}}}t.Z=g.memo((0,v.ZP)((function(e){var t,n,i,c,l=e.file,p=e.className,v=e.uc,j=e.onDelete,C=e.type,E="public"===(void 0===C?"public":C),F=(0,k.V)(),A=(0,g.useContext)(x.Il),M=A.api,I=A.alert,L=A.loading,H=(0,N.T)().endpoints,q=(0,_.z)().gateway,R=(0,g.useCallback)((0,r.Z)(o().mark((function e(){var t,n,r,i,a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.Encrypted||0!==d().size(l.items)){e.next=29;break}if(e.prev=1,v.secret){e.next=4;break}return e.abrupt("return");case 4:return L.show(),t=Z(l,0,q),e.next=8,s().get(t,{responseType:"arraybuffer"});case 8:return n=e.sent,console.info("res::",n),r=(new Date).getTime(),e.next=13,(0,y.n)(n.data,v.secret);case 13:if(i=e.sent,console.info("decrypt:",((new Date).getTime()-r)/1e3),i){e.next=17;break}throw"error";case 17:console.info("de:",i),a=new File([i],l.Name,{type:n.headers["content-type"]}),(0,u.saveAs)(a,l.Name),L.hide(),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(1),L.hide(),I.error("Decrypt error");case 27:e.next=31;break;case 29:c=Z(l,0,q),window.open(c,"_blank");case 31:case"end":return e.stop()}}),e,null,[[1,23]])}))),[v,l,H,q]),B=(0,P.WY)(),V=function(){var e=(0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D(l,B);case 3:t=e.sent,window.open(t,"_blank"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),I.error((0,O.az)(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=(0,r.Z)(o().mark((function e(){var t,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D(l,B);case 3:t=e.sent,n=B.nickName?"Check out what '".concat(B.nickName,"' is sharing on Crust Files!"):"Check out what I am sharing on Crust Files!",r="https://twitter.com/intent/tweet?text=".concat(encodeURI(n),"&url=").concat(encodeURIComponent(t),"&hashtags=web3,ipfs,crustnetwork,metaverse,crustfiles"),window.open(r,"_blank"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),I.error((0,O.az)(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),U=M&&(null===(t=M.query)||void 0===t?void 0:t.market)&&((0,a.m)(M.query.market.filesV2)?M.query.market.filesV2:M.query.market.files),W=M&&(null===(n=M.query)||void 0===n?void 0:n.market)&&M.query.market.files,K=!!U,J=(0,w.W7)(U,[l.Hash]),X=(0,w.W7)(W,[l.Hash]),Y=(0,w.W7)(null===M||void 0===M||null===(i=M.derive)||void 0===i||null===(c=i.chain)||void 0===c?void 0:c.bestNumber),$=Y&&Y.toNumber(),Q=(0,g.useMemo)((function(){var e={status:"Submitted"};if(X&&!X.isEmpty){var t=T(X),n=t.expired_at,r=t.reported_replica_count,i=t.amount,o=t.file_size,a=t.prepaid;e.expireTime=n,e.amount=i,e.startTime=n?n-216e3:0,e.fileSize=o,e.confirmedReplicas=r,e.prepaid=a,n&&n<$&&(e.status="Expired"),r<1&&(e.status="Submitted"),n&&n>$&&r>0&&(e.status="Success")}else if(J&&!J.isEmpty){var c=T(J),s=c.expired_at,u=c.reported_replica_count,f=c.amount,p=c.file_size,d=c.prepaid;e.expireTime=s,e.amount=f,e.startTime=s?s-216e3:0,e.fileSize=p,e.confirmedReplicas=u,e.prepaid=d,s&&s<$&&(e.status="Expired"),u<1&&(e.status="Submitted"),s&&s>$&&u>0&&(e.status="Success")}else K&&(new Date).getTime()-l.PinTime>=72e5&&(e.status="Failed");return $||(e.status="Loading"),e}),[X,J,$]);return(0,S.jsxs)(m.Z.Row,{className:p,children:[(0,S.jsxs)(m.Z.Cell,{className:"fileName",children:[(0,O.lS)(l.Name),l.items&&(0,S.jsx)("span",{className:"icon cru-fo-folder"}),l.Encrypted&&(0,S.jsx)(h.Z,{trigger:(0,S.jsx)("span",{className:"icon cru-fo-key"}),content:"Encrypted",position:"top center"})]}),(0,S.jsxs)(m.Z.Cell,{textAlign:"right",children:[(0,O.lS)(l.Hash),(0,S.jsx)(h.Z,{position:"top center",content:"Copy File CID",trigger:(0,S.jsx)("span",{className:"cru-fo cru-fo-copy",onClick:function(){return F(l.Hash)},style:{marginLeft:"1.8rem"}})})]}),(0,S.jsx)(m.Z.Cell,{textAlign:"center",style:{textTransform:"uppercase"},children:f()(Number(l.Size),{round:2})}),(0,S.jsxs)(m.Z.Cell,{textAlign:"center",children:["Loading"===Q.status&&(0,S.jsx)(b.Z,{loading:!0,name:"spinner"}),"Submitted"===Q.status&&Q.status,"Expired"===Q.status&&Q.status,"Failed"===Q.status&&Q.status,"Success"===Q.status&&"".concat(Q.status," (").concat(Q.confirmedReplicas," Replicas)")]}),(0,S.jsxs)(m.Z.Cell,{textAlign:"center",children:[(0,S.jsx)(h.Z,{position:"top center",content:"Open",trigger:(0,S.jsx)("span",{className:"cru-fo cru-fo-external-link",style:{marginLeft:"1rem"},onClick:R})}),(0,S.jsx)(h.Z,{position:"top center",content:"Delete",trigger:(0,S.jsx)("span",{className:"cru-fo cru-fo-trash-2",style:{marginLeft:"1rem"},onClick:function(){j(l)}})}),(0,S.jsx)(h.Z,{position:"top center",content:"IPFS Scan",trigger:(0,S.jsx)("span",{className:"cru-fo cru-fo-search",style:{marginLeft:"1rem"},onClick:function(){window.open("https://ipfs-scan.io?cid=".concat(l.Hash),"_blank")}})})]}),E&&(0,S.jsx)(m.Z.Cell,{textAlign:"center",children:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(z.Z,{className:"item-share-btn",onClick:V,children:"Share"}),(0,S.jsx)(h.Z,{position:"top center",content:"Quick Tweet",trigger:(0,S.jsx)("span",{className:"cru-fo cru-fo-twitter",onClick:G,style:{marginLeft:"0.5rem",top:"0.2rem"}})})]})})]})})).withConfig({displayName:"FileItem",componentId:"sc-3bbeav-0"})(["color:var(--secend-color) !important;.cru-fo,.icon{cursor:pointer;font-size:1.3rem;position:relative;top:0.3rem;}.fileName{.icon{margin-left:0.6rem;}}.item-share-btn{padding:5px 11px !important;border-radius:8px !important;}"]))},52423:function(e,t,n){"use strict";n.d(t,{y:function(){return s},z:function(){return u}});var r=n(29163),i=(n(67294),n(85893)),o=32,a=function(e){return"number"===typeof e?"".concat(e,"px"):e};function c(e){var t=e.className;return(0,i.jsxs)("div",{className:t,children:[(0,i.jsx)("a",{href:"https://discord.gg/XeY9FKBzdK",target:"_blank",rel:"noreferrer"}),(0,i.jsx)("a",{href:"https://twitter.com/CrustNetwork",target:"_blank",rel:"noreferrer"}),(0,i.jsx)("a",{href:"https://t.me/CrustNetwork",target:"_blank",rel:"noreferrer"}),(0,i.jsx)("a",{href:"https://crust.network",target:"_blank",rel:"noreferrer"})]})}var s=(0,r.ZP)(c).withConfig({displayName:"Links",componentId:"sc-1efqffp-0"})(["height:",";align-items:flex-start;flex-shrink:0;display:flex;a{margin-right:",";background-size:contain;background-repeat:no-repeat;background-position:center;width:",";height:",";}a:nth-child(1){background-image:url('/images/icon_discord.png');}a:nth-child(2){background-image:url('/images/icon_twitter.png');}a:nth-child(3){background-image:url('/images/icon_telegram.png');}a:nth-child(4){background-image:url('/images/icon_crust.png');}a:last-child{margin-right:0;}&.dark{filter:invert(80%);}"],(function(e){var t=e.size;return a(void 0===t?o:t)}),(function(e){var t=e.space;return a(void 0===t?40:t)}),(function(e){var t=e.size;return a(void 0===t?o:t)}),(function(e){var t=e.size;return a(void 0===t?o:t)})),u=(0,r.ZP)(c).withConfig({displayName:"Links__Links2",componentId:"sc-1efqffp-1"})(["height:",";align-items:flex-start;flex-shrink:0;display:flex;a{margin-right:",";background-size:contain;background-repeat:no-repeat;background-position:center;width:",";height:",";}a:nth-child(1){background-image:url('/images/icon_discord.svg');}a:nth-child(2){background-image:url('/images/icon_twitter.svg');}a:nth-child(3){background-image:url('/images/icon_telegram.svg');}a:nth-child(4){background-image:url('/images/icon_crust.svg');}a:last-child{margin-right:0;}"],(function(e){var t=e.size;return a(void 0===t?o:t)}),(function(e){var t=e.space;return a(void 0===t?40:t)}),(function(e){var t=e.size;return a(void 0===t?o:t)}),(function(e){var t=e.size;return a(void 0===t?o:t)}))},12415:function(e,t,n){"use strict";n.d(t,{JV:function(){return p},Cj:function(){return g},G3:function(){return b},xe:function(){return v}});var r=n(94184),i=n.n(r),o=n(67294),a=n(29163),c=n(96486),s=n.n(c),u=n(85893),l=function(e,t){return"string"===typeof e?e:t?"".concat(s().round(e),"px"):"".concat(s().round(e,4),"rem")},f=function(e){return"number"===typeof e||e.endsWith("px")};var p=(0,a.ZP)((function(e){var t=e.className,n=e.position,r=void 0===n?"left":n,a=e.fullH,c=void 0!==a&&a,p=e.count,d=void 0===p?3:p,g=e.width,m=void 0===g?120:g,h=e.color,b=void 0===h?"#191919":h,v=e.fillColor,x=void 0===v?"#000000":v,y=e.type,w=void 0===y?2:y,k=c?d+1:d,_=f(m),j="number"===typeof m?m:s().toNumber(m.replace("px","").replace("rem","")),C=(0,o.useMemo)((function(){return j/k}),[m,k]),N=(0,o.useMemo)((function(){return(2*(k-1)+w)*C}),[k,w,C]),O=(0,o.useMemo)((function(){for(var e=[],t=0;t<k;t++){var n=0===t&&c,i=n?"100%":N-2*t*C,o=l(i,_),a=n?0:"calc(50% - ".concat(l(i/2,_),")"),s={position:"absolute",height:o,width:l(C,_),top:a,backgroundColor:b};"left"===r?s.left=l(t*C,_):"right"===r&&(s.right=l(t*C,_)),e.push({style:s})}return e}),[k,C,N,c,r,_]),P=(0,o.useMemo)((function(){for(var e=[],t=0;t<k-1;t++){var n=N-2*(t+1)*C,i=l(n,_),o="calc(50% - ".concat(l(n/2,_),")"),a={position:"absolute",height:i,width:l(C,_),top:o,zIndex:2,backgroundColor:x};"left"===r?a.left=l(t*C,_):"right"===r&&(a.right=l(t*C,_)),e.push({style:a})}return e}),[k,C,N,c,r,_]);return(0,u.jsxs)("div",{className:i()(t,"Pixel_".concat(r)),children:[O.map((function(e,t){return(0,u.jsx)("div",{style:e.style},"pixels_".concat(t))})),P.map((function(e,t){return(0,u.jsx)("div",{style:e.style},"fill_pixels_".concat(t))}))]})})).withConfig({displayName:"Pixels__Pixel",componentId:"sc-1vz4at9-0"})(["z-index:2;display:flex;height:100%;position:relative;width:",";&.Pixel_left{flex-direction:row;}&.Pixel_right{flex-direction:row-reverse;}"],(function(e){var t=e.width,n=void 0===t?120:t;return"number"===typeof n?n+"px":n})),d="#000000";var g=(0,a.ZP)((function(e){var t=e.height,n=void 0===t?60:t,r=e.className,o=e.color,a=void 0===o?"#999999":o,c=e.fillColor,g=void 0===c?d:c,m=e.content,h=e.disabled,b=e.unClick,v=e.onClick,x=f(n),y="number"===typeof n?n:s().toNumber(n.replace("px","").replace("rem","")),w=l(y/5*3,x);return(0,u.jsxs)("div",{className:i()(r,{disabled:h,unClick:b}),onClick:v,children:[(0,u.jsx)(p,{type:1,width:w,color:a,fillColor:g,position:"right"}),(0,u.jsx)("div",{className:"btn_content",children:m}),(0,u.jsx)(p,{type:1,width:w,color:a,fillColor:g,position:"left"})]})})).withConfig({displayName:"Pixels__PixelBtn",componentId:"sc-1vz4at9-1"})(["display:flex;user-select:none;align-items:center;width:min-content;height:",";cursor:pointer;&.disabled{cursor:not-allowed;opacity:0.6;}&.unClick{cursor:default;}.btn_content{height:100%;line-height:",";padding:0 20px;min-width:calc(130px + 7.14rem);font-size:1.71rem;font-family:OpenSans-SemiBold;color:white;text-align:center;background-color:",";}&:hover{}"],(function(e){var t=e.height;return l(t,f(t))}),(function(e){var t=e.height;return l(t,f(t))}),(function(e){var t=e.fillColor;return void 0===t?d:t})),m=51,h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.ceil(.725*e*t)},b=a.ZP.div.withConfig({displayName:"Pixels__PixelBtn1",componentId:"sc-1vz4at9-2"})(["color:white;font-family:'OpenSans-SemiBold';font-size:32px;line-height:","px;height:","px;text-align:center;width:357px;cursor:pointer;transition:all ease-in-out 200ms;background-image:url('/images/btn/btn_bg_l.png'),url('/images/btn/btn_bg_c.png'),url('/images/btn/btn_bg_r.png');background-position:0 0,","px 0,right center;background-repeat:no-repeat;background-attachment:scroll;background-size:","px 100%,calc(100% - ","px) 100%,","px 100%;&.dark{background-image:url('/images/btn/btn_dark_bg_l.png'),url('/images/btn/btn_dark_bg_c.png'),url('/images/btn/btn_dark_bg_r.png');}transform-origin:center top;&.style_left{transform-origin:right top;background-image:url('/images/btn/btn_bg_l.png'),url('/images/btn/btn_bg_c.png'),url('/images/btn/btn_bg_r2.png');&.dark{background-image:url('/images/btn/btn_dark_bg_l.png'),url('/images/btn/btn_dark_bg_c.png'),url('/images/btn/btn_dark_bg_r2.png');}}&.style_right{transform-origin:left top;background-image:url('/images/btn/btn_bg_l2.png'),url('/images/btn/btn_bg_c.png'),url('/images/btn/btn_bg_r.png');&.dark{background-image:url('/images/btn/btn_dark_bg_l2.png'),url('/images/btn/btn_dark_bg_c.png'),url('/images/btn/btn_dark_bg_r.png');}}@media screen and (max-width:1440px){transform:scale(0.9);}@media screen and (max-width:1296px){transform:scale(0.8);}"],(function(e){var t=e.height;return void 0===t?m:t}),(function(e){var t=e.height;return void 0===t?m:t}),(function(e){var t=e.height;return h(void 0===t?m:t)-2}),(function(e){var t=e.height;return h(void 0===t?m:t)}),(function(e){var t=e.height;return h(void 0===t?m:t,2)-4}),(function(e){var t=e.height;return h(void 0===t?m:t)})),v=a.ZP.div.attrs((function(e){return{board_size:e.board_size||12}})).withConfig({displayName:"Pixels__PixelBoard",componentId:"sc-1vz4at9-3"})(["padding:","px;background-repeat:no-repeat;background-size:calc(100% - ","px) ","px,calc(100% - ","px) ","px,","px calc(100% - ","px),","px calc(100% - ","px);background-position:","px top,","px bottom,left ","px,right ","px;background-image:linear-gradient(0deg,black,black),linear-gradient(0deg,black,black),linear-gradient(0deg,black,black),linear-gradient(0deg,black,black);"],(function(e){return e.board_size}),(function(e){return 2*e.board_size}),(function(e){return e.board_size}),(function(e){return 2*e.board_size}),(function(e){return e.board_size}),(function(e){return e.board_size}),(function(e){return 2*e.board_size}),(function(e){return e.board_size}),(function(e){return 2*e.board_size}),(function(e){return e.board_size}),(function(e){return e.board_size}),(function(e){return e.board_size}),(function(e){return e.board_size}))},54040:function(e,t,n){"use strict";n.d(t,{P:function(){return s},n:function(){return u}});var r=n(30266),i=n(809),o=n.n(i),a=function(){var e=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveKey"]));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=(0,r.Z)(o().mark((function e(t,n,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.deriveKey(r,t,{name:"AES-GCM",length:256},!1,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),s=function(){var e=(0,r.Z)(o().mark((function e(t,n){var r,i,s,u,l,f,p,d,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new Uint8Array(t),i=(new TextEncoder).encode(n),s=window.crypto.getRandomValues(new Uint8Array(16)),u=window.crypto.getRandomValues(new Uint8Array(12)),e.next=7,a(i);case 7:return l=e.sent,e.next=10,c(l,["encrypt"],{name:"PBKDF2",salt:s,iterations:25e4,hash:"SHA-256"});case 10:return f=e.sent,e.next=13,window.crypto.subtle.encrypt({name:"AES-GCM",iv:u},f,r);case 13:return p=e.sent,d=new Uint8Array(p),(g=new Uint8Array(d.byteLength+s.byteLength+u.byteLength)).set(s,0),g.set(u,s.byteLength),g.set(d,s.byteLength+u.byteLength),e.abrupt("return",g);case 22:throw e.prev=22,e.t0=e.catch(0),console.error("Error encrypting file"),console.error(e.t0),e.t0;case 27:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t,n){return e.apply(this,arguments)}}(),u=function(){var e=(0,r.Z)(o().mark((function e(t,n){var r,i,s,u,l,f,p,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new Uint8Array(t),i=(new TextEncoder).encode(n),s=r.slice(0,16),u=r.slice(16,28),l=r.slice(28),e.next=8,a(i);case 8:return f=e.sent,e.next=11,c(f,["decrypt"],{name:"PBKDF2",salt:s,iterations:25e4,hash:"SHA-256"});case 11:return p=e.sent,e.next=14,window.crypto.subtle.decrypt({name:"AES-GCM",iv:u},p,l);case 14:return d=e.sent,e.abrupt("return",d);case 18:return e.prev=18,e.t0=e.catch(0),console.error("Error decrypting file"),console.error(e.t0),e.abrupt("return");case 23:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,n){return e.apply(this,arguments)}}()},65369:function(e,t,n){"use strict";n.d(t,{W7:function(){return l}});var r=n(80318),i=n(83789),o=n(67294),a=n(66103),c=n(98278);function s(e){return e}function u(e){e.current.isActive=!1,e.current.subscriber&&(e.current.subscriber.then((function(e){return e()})).catch(console.error),e.current.subscriber=null)}function l(e,t,n){var l=function(){var e=(0,o.useRef)(!1);return(0,o.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),e}(),f=(0,o.useRef)({isActive:!1,serialized:null,subscriber:null}),p=(0,o.useState)((n||{}).defaultValue),d=p[0],g=p[1];return(0,o.useEffect)((function(){return function(){return u(f)}}),[]),(0,o.useEffect)((function(){if(l.current&&e){var o=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).paramMap,r=void 0===n?s:n;return[JSON.stringify({f:null===e||void 0===e?void 0:e.name,p:t}),0!==t.length&&t.some((function(e){return(0,a.F)(e)||(0,c.o)(e)}))?null:r(t)]}(e,t||[],n),p=(0,r.Z)(o,2),d=p[0],m=p[1];m&&d!==f.current.serialized&&(f.current.serialized=d,function(e,t,n,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},l=a.transform,f=void 0===l?s:l,p=a.withParams,d=a.withParamsTransform,g=r.filter((function(e){return!(0,c.o)(e)}));u(t),setTimeout((function(){var a;e.current&&(!n||n.meta&&null!==(a=n.meta.type)&&void 0!==a&&a.isDoubleMap&&2!==g.length?t.current.subscriber=null:(t.current.isActive=!0,t.current.subscriber=n.apply(void 0,(0,i.Z)(r).concat([function(n){e.current&&t.current.isActive&&e.current&&t.current.isActive&&o(p?[r,f(n)]:f(d?[r,n]:n))}]))))}),0)}(l,f,e,m,g,n))}}),[e,n,l,t]),d}},20478:function(e,t,n){"use strict";n.d(t,{V:function(){return c}});var r=n(67294),i=n(12752),o=n(20640),a=n.n(o);function c(){var e=(0,r.useContext)(i.Il).alert;return(0,r.useCallback)((function(t){a()(t),e.alert({msg:"Copied",type:"success"})}),[e])}},81496:function(e,t,n){"use strict";n.d(t,{z:function(){return p}});var r=n(92809),i=n(80318),o=n(67294),a=n(58971),c=n.n(a),s=n(34111);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=[{text:"https://ipfs.io",value:"https://ipfs.io"},{text:"https://crustgateway.online",value:"https://crustgateway.online"},{text:"https://gw.w3ipfs.org.cn",value:"https://gw.w3ipfs.org.cn"}];function p(){var e=(0,o.useState)({gateway:"https://ipfs.io"}),t=e[0],n=e[1],r=(0,o.useState)(f),a=r[0],u=r[1];(0,o.useEffect)((function(){var e=c().get("downloadgateway");e&&n(e),c().get("allDownloadGateways"),a&&u(a)}),[]);var p=(0,o.useCallback)((function(e){var t={gateway:e};n(t),c().set("downloadgateway",t)}),[]),d=(0,s.X)((function(){return fetch("https://gist.githubusercontent.com/XueMoMo/2cfc982ce6aefb85e09313b714a029bd/raw/CrustFilesDownloadGateway.json").then((function(e){return e.json()})).then((function(e){return e.map((function(e){return{text:e,value:e}}))}))}),[]),g=(0,i.Z)(d,1)[0];return(0,o.useEffect)((function(){g&&g.length&&(c().set("allDownloadGateways",g),u(g))}),[g]),(0,o.useMemo)((function(){return l(l({},t),{},{set:p,allDownloadGateways:a})}),[t,p,a])}},34111:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var r=n(67294),i={};function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:800,a=(0,r.useState)(),c=a[0],s=a[1],u=(0,r.useState)(!1),l=u[0],f=u[1];(0,r.useEffect)((function(){var e={cancel:!1};return d(e),function(){e.cancel=!0}}),t);var p=function(){if(n){var t=(new Date).getTime(),r=i[n],a=!r||t-r.time>o,c=a?e():r.get;return i[n]={time:a?t:r.time,get:c},c}return e()},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cancel:!1};if(t.length&&t.some((function(e){return!e})))return Promise.resolve(c);s(void 0),f(!0);var r=p();return r.then?r.then((function(t){return n&&console.info("cache:",n,t),e.cancel||s(t),t})).catch(console.error).then((function(t){return e.cancel||f(!1),t})):void 0};return[c,d,l]}},57288:function(e,t,n){"use strict";n.d(t,{F:function(){return i}});var r=n(67294);function i(e){var t=(0,r.useState)(e),n=t[0],i=t[1],o=(0,r.useState)({safe:!0})[0];(0,r.useEffect)((function(){return o.safe=!0,function(){o.safe=!1}}));return[n,function(e){o.safe&&i(e)}]}},59996:function(e,t,n){"use strict";n.d(t,{H:function(){return a}});var r=n(9669),i=n.n(r),o=n(45129);function a(e){return i().post((0,o.uJ)("/common/report"),e).catch(console.error)}},56262:function(e,t,n){"use strict";n.d(t,{T:function(){return f},q:function(){return p}});var r=n(92809),i=n(67294),o=n(75282),a=n(25443),c=n(58971),s=n.n(c);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"upload:last-gateway",t=(0,a.$)(),n=t.t,r=(0,i.useMemo)((function(){return(0,o.Dl)(n).map((function(e){var t,n;return l(l({},e),{},{text:"".concat(null!==(t=e.text)&&void 0!==t?t:""," (").concat(null!==(n=e.location)&&void 0!==n?n:"",")")})}))}),[n]),c=(0,i.useMemo)((function(){var t=s().get(e);if(t){var n=r.findIndex((function(e){return e.value===t.value}));if(n>=0)return n}return 0}),[e,r]),u=(0,i.useState)(r[c]),f=u[0],p=u[1],d=(0,i.useCallback)((function(t){p((function(n){var r="function"===typeof t?t(n):t;return s().set(e,{value:r.value}),r}))}),[]),g=(0,i.useCallback)((function(e,t){var n=t.value,i=r.find((function(e){return e.value===n}));i&&d(i)}),[r,d]);return(0,i.useMemo)((function(){return{endpoints:r,endpoint:f,setEndpoint:d,onChangeEndpoint:g}}),[r,f,d,g])}function p(){var e=(0,a.$)().t,t=(0,i.useMemo)((function(){return(0,o.qi)(e).sort((function(){return Math.random()>.5?-1:1})).map((function(e){var t;return l(l({},e),{},{text:"".concat(null!==(t=e.text)&&void 0!==t?t:"Pinner")})}))}),[e]),n=(0,i.useState)(t[0]),r=n[0],c=n[1],s=(0,i.useCallback)((function(e,n){var r=n.value,i=t.find((function(e){return e.value===r}));i&&c(i)}),[t]);return(0,i.useMemo)((function(){return{pinner:r,pins:t,setPinner:c,onChangePinner:s}}),[r,t,s])}},27329:function(e,t,n){"use strict";n.r(t);var r=n(92809),i=n(80318),o=n(94184),a=n.n(o),c=n(11163),s=n(67294),u=n(29163),l=n(12415),f=n(66028),p=n(58398),d=n(52423),g=n(12752),m=n(20478),h=n(57288),b=n(59996),v=n(45129),x=n(99056),y=n(85893);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}t.default=s.memo((0,u.ZP)((function(e){var t=e.className,n=(0,c.useRouter)(),o=n.query,u=n.push,k=(0,g.qD)(),_=k.alert,j=k.loading,C=(0,h.F)(),N=(0,i.Z)(C,2),O=N[0],P=N[1],z=O||{},S=z.options,E=z.cid;(0,s.useEffect)((function(){if(o.cid){var e=o.options,t=JSON.parse(e);P({options:t,cid:o.cid})}o.code&&(j.show(),(0,v.tO)(o.code).then((function(e){return P(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))})).catch((function(e){return _.error((0,x.az)(e))})).then(j.hide))}),[o]),(0,s.useEffect)((function(){E&&S&&(0,b.H)({type:3,walletType:S.fromWallet,address:S.fromAccount,data:{cid:E,fileType:S.isDir?1:0,strategy:S.encrypted?1:0,shareType:1}})}),[E,S]);var Z=(0,s.useMemo)((function(){if(!S||!E)return"";var e=(new Date).getTime(),t=f.N[e%8];return"".concat(t,"/ipfs/").concat(E,"?filename=").concat(S.name)}),[S,E]),D=(0,m.V)(),F=(S||{}).from;return(0,y.jsxs)("div",{className:a()(t),children:[(0,y.jsxs)("div",{className:"share--panel",children:[(0,y.jsx)("img",{className:"logo",src:"/images/logo_12x.png"}),(0,y.jsx)("div",{className:"share--flex1"}),(0,y.jsxs)("div",{className:"share-info",children:[O&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"title",children:[F&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("span",{children:F}),(0,y.jsx)("br",{})]}),"is sharing something",(0,y.jsx)("br",{}),"from Crust Files."]}),(0,y.jsx)("div",{className:"link",children:"File CID: ".concat(E)}),(0,y.jsxs)(p._t,{children:[(0,y.jsx)(l.Cj,{onClick:function(){window.open(Z,"_blank")},height:"4.29rem",content:"Open File"}),(0,y.jsx)("div",{style:{width:"2.2857rem"}}),(0,y.jsx)(l.Cj,{onClick:function(){D(window.location.href)},color:"#E46A11",fillColor:"#FF8D00",height:"4.29rem",content:"Copy Link"})]})]}),(0,y.jsx)("div",{className:"go-to",onClick:function(){return u("/")},children:"Go to Crust Files"})]}),(0,y.jsx)("div",{className:"share--flex1"})]}),(0,y.jsx)("div",{className:"share--pixels",children:(0,y.jsx)(l.JV,{className:"pixel_right",position:"right",fullH:!0,color:"#E46A11",fillColor:"#FF8D00"})}),(0,y.jsxs)("div",{className:"share--activity",children:[(0,y.jsxs)("div",{className:"text",children:["Your",(0,y.jsx)("br",{}),"first personal",(0,y.jsx)("br",{}),"Web3.0 storage",(0,y.jsx)("br",{}),"in the Metaverse.",(0,y.jsx)("br",{})]}),(0,y.jsx)("div",{className:"footer",children:(0,y.jsx)(d.y,{className:"links"})})]})]})})).withConfig({displayName:"share",componentId:"sc-uk0lct-0"})(["width:100%;height:100vh;min-height:70rem;background:white;display:flex;.share--flex1{flex:1;}.share--panel{display:flex;flex-direction:column;position:relative;height:100%;flex:1;align-items:center;.logo{height:2.5rem;align-self:flex-start;margin-top:2.57rem;margin-left:3.57rem;}.share-info{width:49.07rem;padding-bottom:10rem;.title{font-size:4.29rem;line-height:5.86rem;font-family:OpenSans-SemiBold;color:black;span{color:var(--primary-color);}}.link{font-size:2rem;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;line-height:2.71rem;margin-top:1.71rem;margin-bottom:6rem;color:var(--secend-color);}.go-to{font-size:2rem;margin-top:5.4286rem;line-height:2.71rem;color:black;text-decoration:underline;cursor:pointer;}}}.share--pixels{width:12.86rem;position:relative;flex-shrink:0;.pixel_right{position:absolute;right:0;top:0;}}.share--activity{background:var(--primary-color);padding:6.14rem .71rem 4rem 1.43rem;width:35.36rem;flex-shrink:0;display:flex;flex-direction:column;.text{font-size:4.29rem;line-height:5.86rem;font-family:OpenSans-SemiBold;color:#FFE2C8;span{color:white;}}.footer{display:flex;flex-direction:column;align-items:flex-start;margin-top:2rem;}.links{margin-top:1rem;flex-shrink:0;height:2.71rem;align-items:center;}}"]))},61158:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/share",function(){return n(27329)}])}},function(e){e.O(0,[3290,2298,5551,9774,2888,179],(function(){return t=61158,e(e.s=t);var t}));var t=e.O();_N_E=t}]);