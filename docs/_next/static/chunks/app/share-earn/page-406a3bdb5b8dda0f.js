(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4407],{39993:(e,r,t)=>{Promise.resolve().then(t.bind(t,76671))},59061:(e,r,t)=>{"use strict";t.d(r,{Gc:()=>c});var i=t(3821),n=t(34233),s=t(48480);function a(e){return e}function o(e){e.current.isActive=!1,e.current.subscriber&&(e.current.subscriber.then(e=>e()).catch(console.error),e.current.subscriber=null)}function c(e,r,t){let c=function(){let e=(0,i.useRef)(!1);return(0,i.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}(),l=(0,i.useRef)({isActive:!1,serialized:null,subscriber:null}),[d,m]=(0,i.useState)((t||{}).defaultValue);return(0,i.useEffect)(()=>()=>o(l),[]),(0,i.useEffect)(()=>{if(c.current&&e){let[i,d]=function(e,r){let{paramMap:t=a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return[JSON.stringify({f:null==e?void 0:e.name,p:r}),0!==r.length&&r.some(e=>(0,n.k)(e)||(0,s.b)(e))?null:t(r)]}(e,r||[],t);d&&i!==l.current.serialized&&(l.current.serialized=i,function(e,r,t,i,n){let{transform:c=a,withParams:l,withParamsTransform:d}=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},m=i.filter(e=>!(0,s.b)(e));o(r),setTimeout(()=>{if(e.current){var s;!t||t.meta&&(null==(s=t.meta.type)?void 0:s.isDoubleMap)&&2!==m.length?r.current.subscriber=null:(r.current.isActive=!0,r.current.subscriber=t(...i,t=>{e.current&&r.current.isActive&&e.current&&r.current.isActive&&n(l?[i,c(t)]:d?c([i,t]):c(t))}))}},0)}(c,l,e,d,m,t))}},[e,t,c,r]),d}},64743:(e,r,t)=>{"use strict";t.d(r,{Ij:()=>s,KO:()=>n,P3:()=>a}),t(29913),t(3821);var i=t(23472);let n=i.Ay.img.attrs({src:"/images/coin.svg"}).withConfig({componentId:"sc-86a76b52-0"})(["width:2.43rem;height:2.29rem;object-fit:contain;display:inline-block;"]),s=i.Ay.img.attrs({src:"/images/badge1.svg"}).withConfig({componentId:"sc-86a76b52-1"})(["width:100px;height:100px;object-fit:contain;display:inline-block;"]),a=i.Ay.img.attrs({src:"/images/badge2.svg"}).withConfig({componentId:"sc-86a76b52-2"})(["width:100px;height:100px;object-fit:contain;display:inline-block;"]);i.Ay.embed.withConfig({componentId:"sc-86a76b52-3"})(["width:24px;height:24px;"])},76671:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>q});var i=t(29913),n=t(25129),s=t.n(n),a=t(11170),o=t.n(a),c=t(55982),l=t.n(c),d=t(84371),m=t(3821),h=(t(59544),t(23472)),g=t(8320),u=t(20588),p=t(64743),f=t(93127),w=t(87080),x=t(59061),b=t(18041),v=t(6271),j=t(35295),y=t(85916);function C(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"--:--:--",[t,i]=(0,m.useState)(r);return(0,m.useEffect)(()=>{let r=e;console.info("countdown:",e);let t=setInterval(()=>{(r-=1)>=0?i((0,y.A)(r).format({output:"time"})):clearInterval(t)},1e3);return()=>{clearInterval(t)}},[e]),t}var k=t(12034),_=t(32876),R=t(87998),N=t(34133),z=t(77036);let A=h.Ay.div.withConfig({componentId:"sc-56e3e03d-0"})(['width:9.21rem;height:7.71rem;background-image:url("/images/earn_bg.png");background-size:cover;text-align:center;padding-top:1.93rem;padding-bottom:2.21rem;line-height:1.71rem;font-size:1.86rem;position:absolute;top:-2.93rem;right:0.86rem;color:var(--primary-color);']),I=h.Ay.div.withConfig({componentId:"sc-56e3e03d-1"})(["color:#000000;font-size:2.29rem;line-height:3.14rem;align-self:center;span{color:var(--primary-color);}"]),U=h.Ay.a.withConfig({componentId:"sc-56e3e03d-2"})(["white-space:nowrap;display:inline-block;font-size:1rem;line-height:1.36rem;color:var(--main-color);text-decoration:underline;"]),D=(0,h.Ay)(U).withConfig({componentId:"sc-56e3e03d-3"})(["position:absolute;right:2rem;bottom:2rem;"]),E=h.Ay.div.withConfig({componentId:"sc-56e3e03d-4"})(['position:absolute;width:5.14rem;height:7.07rem;background-repeat:no-repeat;background-image:url("/images/img_women.png");background-size:cover;bottom:12px;left:28.57rem;&::after{content:"You";position:absolute;top:-1.36rem;left:1.71rem;}']),M=h.Ay.div.withConfig({componentId:"sc-56e3e03d-5"})(['position:absolute;width:5.14rem;height:6.43rem;background-size:cover;background-repeat:no-repeat;background-image:url("/images/img_man.png");bottom:12px;right:11rem;&::after{content:"Your Friend";position:absolute;white-space:nowrap;top:-1.36rem;left:0;}']),S=h.Ay.div.withConfig({componentId:"sc-56e3e03d-6"})(['background-repeat:no-repeat;background-image:url("/images/comment/comment_1_l.png"),url("/images/comment/comment_1_c.png"),url("/images/comment/comment_1_r.png");background-size:4.71rem 100%,calc(100% - 6.14rem + 0.29rem) 100%,1.43rem 100%;background-position:0 0,4.57rem 0,right 0;position:absolute;bottom:2.29rem;left:33.71rem;width:min-content;height:6.29rem;padding-left:0.57rem;padding-right:0.57rem;font-size:1.29rem;line-height:1.79rem;text-align:center;padding-top:1rem;color:black;white-space:nowrap;span{color:var(--primary-color);}']),P=h.Ay.div.withConfig({componentId:"sc-56e3e03d-7"})(['background-repeat:no-repeat;background-image:url("/images/comment/comment_2_l.png"),url("/images/comment/comment_2_c.png"),url("/images/comment/comment_2_r.png");background-size:1.64rem 100%,calc(100% - 6.36rem + 0.29rem) 100%,4.71rem 100%;background-position:0 0,1.5rem 0,right 0;position:absolute;bottom:6.21rem;right:15.14rem;width:min-content;height:7.07rem;font-size:1.29rem;line-height:1.79rem;text-align:center;padding-top:0.5rem;padding-left:0.57rem;padding-right:0.57rem;white-space:nowrap;color:black;span{color:var(--primary-color);}']),O=h.Ay.div.withConfig({componentId:"sc-56e3e03d-8"})(["color:var(--primary-color);font-size:2.29rem;display:flex;align-items:center;margin-bottom:0.57rem;img{margin-right:0.71rem;}"]),F=h.Ay.img.attrs({src:"/images/trophy.svg"}).withConfig({componentId:"sc-56e3e03d-9"})(["width:9.86rem;height:9.21rem;"]);h.Ay.div.withConfig({componentId:"sc-56e3e03d-10"})(["font-size:1.29rem;line-height:1.71rem;text-align:center;white-space:nowrap;margin-top:0.29rem;span{color:#2a66fe;}"]),(0,h.Ay)(u.HD).attrs(e=>({progress:e.progress||0,board_size:2})).withConfig({componentId:"sc-56e3e03d-11"})(['height:14px;width:104px;margin-right:0.57rem;position:relative;&::after{content:"";position:absolute;top:2px;left:2px;background-color:#2a66fe;height:10px;width:',"px;transition:all ease-in-out 300ms;}"],e=>e.progress||0),h.Ay.div.withConfig({componentId:"sc-56e3e03d-12"})(["display:flex;align-items:center;margin-top:0.71rem;font-size:1rem;line-height:1.36rem;span{color:#2a66fe;}"]),h.Ay.div.withConfig({componentId:"sc-56e3e03d-13"})(["font-size:1.29rem;line-height:1.79rem;margin-top:0.29rem;color:black;"]);let T=(0,h.Ay)(u.xq).attrs(e=>({height:e.height||40})).withConfig({componentId:"sc-56e3e03d-14"})(["margin-top:1.43rem;.btn_content{white-space:nowrap;padding:unset;min-width:12.71rem;width:12.71rem;font-size:1.29rem;}"]),G=h.Ay.div.withConfig({componentId:"sc-56e3e03d-15"})(["display:flex;flex-direction:column;align-items:flex-start;padding-left:4rem;flex:1;color:black;justify-content:center;.title{font-size:2.29rem;line-height:3.14rem;}.sub{margin-top:0.57rem;font-size:1.71rem;line-height:2.36rem;}span{color:var(--primary-color);}"]),H=h.Ay.div.withConfig({componentId:"sc-56e3e03d-16"})(["font-size:1.29rem;line-height:1.79rem;display:flex;height:100%;padding-bottom:1.25rem;flex-direction:column;justify-content:center;align-items:center;"]),Y=(0,h.i7)(["to{transform:translateX(-48.93rem);}"]),$=h.Ay.div.withConfig({componentId:"sc-56e3e03d-17"})(["white-space:nowrap;animation:"," 8s linear infinite;span{margin-left:3.57rem;color:var(--primary-color);}"],Y),B=h.Ay.div.withConfig({componentId:"sc-56e3e03d-18"})(["margin-top:2.5rem;width:100%;position:relative;height:6.79rem;.like{position:absolute;left:0;top:0.07rem;width:auto;height:100%;z-index:2;}.programs{position:absolute;overflow:hidden;z-index:1;right:0;bottom:0;width:calc(100% - 6.43rem);font-size:2.29rem;height:4.29rem;border:0.29rem dashed #000000;padding-top:1.14rem;white-space:nowrap;}"]),q=m.memo((0,h.Ay)(function(e){var r,t,n,a,c;let{className:h}=e,{api:y,alert:Y,loading:q,recaptcha:K}=(0,w.nm)(),L=(0,d.useRouter)(),[V,J]=(0,R.e)(!0),{isPremiumUser:W,isCrust:X,depositDto:Z,user:Q}=(0,_.d)(),{account:ee,sign:er}=Q,et=function(){let{api:e,alert:r,loading:t}=(0,w.nm)(),i=(0,j.ZR)(),[n,s]=(0,m.useState)(!1),[a,o]=(0,m.useState)(!1);return(0,m.useEffect)(()=>{s(!1),o(!1),i.account&&"crust"===i.wallet&&e&&i.crust.wallet&&s(!0)},[e,i]),{start:()=>{if(!n)return;t.show(),o(!1);let s={...i.crust.wallet.signer,signPayload:e=>i.crust.wallet.signer.signPayload(e)};e.setSigner(s),e.tx.system.remark(JSON.stringify({scope:"crustFiles",env:b.T3,action:"claimRewards"})).signAndSend(i.account,{nonce:-1,tip:0},i=>{e.setSigner(void 0),i.status.isFinalized&&((0,v.MY)(i,"system(ExtrinsicSuccess)")?(t.hide(),o(!0)):(t.hide(),r.error("Claim Error")))}).catch(e=>{let i=(0,v.Yf)(e);i.includes("account balance too low")?r.warnModal("Insufficient Funds!"):r.error(i),t.hide()})},ready:n,finish:a}}(),[ei]=(0,k.O)(()=>(0,N.yN)()),[en,es]=(0,k.O)(()=>(0,N.Vr)(ee),[ee,X],"getEarnRewards"),{rewards:ea}=(0,z.wh)({key:"rewards",value:en}),[eo]=(0,k.O)(()=>(0,N.qq)(),[Q.account]),[ec]=(0,k.O)(()=>(0,N._A)(),[Q.account]),[el,,ed]=(0,k.O)(()=>(0,N.Ve)(),[Q.account]),em=((0,m.useMemo)(()=>!!(Q.account&&el&&el.members&&el.members.find(e=>(0,v._X)(e.address,Q.account))),[el,Q.account]),(0,x.Gc)(null==y||null==(t=y.derive)||null==(r=t.chain)?void 0:r.bestNumberFinalized)),[eh,eg]=(0,m.useState)(0);(0,m.useEffect)(()=>{let e=em?em.toNumber():0;eg(r=>r||e)},[em]),(0,m.useEffect)(()=>{let e;if(et.finish){let r=3;e=setInterval(()=>{if(r<=0){clearInterval(e),e=null;return}r-=1,es()},5e3)}return()=>e&&clearInterval(e)},[et.finish]);let eu=et.finish||ea&&ea.onGoing,ep=(0,m.useMemo)(()=>(0,v.cE)(ei&&ei.shareAndEarnPerUserReward),[ei]),ef=(0,m.useMemo)(()=>ei?(0,v.cE)(new(s())(ei.guaranteeAmount).sub(new(s())(ei.guaranteeDiscountWithReferer))):"-",[ei]);(0,m.useMemo)(()=>(0,v.cE)(ei&&ei.depositRewardAmount),[ei]),C((0,m.useMemo)(()=>ec&&eh?6*l().clamp(ec.lastBlockNumber+ec.blockCount-eh,0,ec.blockCount):0,[ec,eh])),(0,m.useMemo)(()=>((null==ec?void 0:ec.blockCount)||300)/10,[ec]),(0,m.useMemo)(()=>el&&el.grandDraw?l().clamp(Math.round(100*el.depositCount/el.grandDraw.memberSize),0,100):0,[el]);let ew=(null==el||null==(n=el.grandDraw)?void 0:n.matchCount)||2,ex=(0,m.useMemo)(()=>Z&&el&&Z.extrinsic_hash?Z.extrinsic_hash.substring(Z.extrinsic_hash.length-el.grandDraw.matchCount):"--",[el,Z]),eb=(0,m.useMemo)(()=>(null==Z?void 0:Z.extrinsic_hash)||"-",[Z]),ev=((0,m.useMemo)(()=>(0,v.ym)(eb,ew),[ew,eb]),a=el,c="grandDraw.blockHash",l().get(a,c,"-")),[ej,ey,eC]=((0,m.useMemo)(()=>!!ev&&!!ex&&ev.endsWith(ex),[ev,ex]),(0,k.O)(()=>(0,N.KZ)(ee),[ee,X])),ek=ej&&ej.applyed,e_=(C((0,m.useMemo)(()=>el&&eh?(el.grandDraw.expireBlock-eh)*6:0,[el,eh])),(0,v.rd)(ea,"total.pending")),eR=!et.ready||!W||eu||!ea||"-"===e_||"0"===e_,eN=(el&&el.drawState,el&&1===el.drawState);return el&&(2===el.drawState||el.drawState),(0,i.jsxs)(g.A,{path:"/share-earn",className:h,children:[(0,i.jsxs)("div",{className:"share-and-earn",children:[(0,i.jsxs)("div",{className:"text",children:[(0,i.jsx)("span",{children:"Share"})," Crust Files with ",(0,i.jsx)("br",{}),"your friends,",(0,i.jsx)("br",{}),(0,i.jsx)("span",{children:"Earn CRU Token"})]}),(0,i.jsxs)(u.HD,{className:"top_card",children:[(0,i.jsxs)("div",{className:"btns",children:[(0,i.jsx)(u.yw,{className:o()("style_left",{dark:!V}),onClick:()=>J(!0),children:"Me"}),(0,i.jsx)(u.yw,{className:o()("style_right",{dark:V}),onClick:()=>J(!1),children:"Network"})]}),V?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"total",children:"My Total Rewards:"}),(0,i.jsxs)("div",{className:"total_reward",children:[(0,i.jsx)("span",{children:(0,v.rd)(ea,"total.total")})," CRU"]}),(0,i.jsxs)(H,{children:[(0,i.jsx)(T,{disabled:eR,content:eu?"Ongoing Claim...":"Claim Rewards",onClick:()=>!eR&&et.start()}),W?(0,i.jsx)("div",{style:{marginTop:8},children:eu?"You have ".concat((0,v.rd)(ea,"total.ongoing")," CRU ongoing claim... Please wait"):"You have ".concat(e_," CRU pending claim rewards.")}):(0,i.jsxs)("div",{style:{marginTop:8},children:[(0,i.jsx)(f.G,{className:"btn",onClick:()=>L.push("/user"),children:"Get Premium"})," ","User to claim your rewards."]})]})]}):(0,i.jsxs)("div",{className:"networks",children:[(0,i.jsxs)("div",{children:["Total User: ",(0,i.jsx)("span",{children:(0,v.rd)(eo,"totalUser")})]}),(0,i.jsxs)("div",{children:["Premium User: ",(0,i.jsx)("span",{children:(0,v.rd)(eo,"premiumUser")})]}),(0,i.jsxs)("div",{children:["Deposit Pool: ",(0,i.jsxs)("span",{children:[(0,v.rd)(eo,"depositPool")," CRU"]})]}),(0,i.jsxs)("div",{children:["Rewards Distributed: ",(0,i.jsxs)("span",{children:[(0,v.rd)(eo,"rewardsDistributed")," CRU"]})]})]})]})]}),(0,i.jsxs)(B,{children:[(0,i.jsx)("img",{className:"like",src:"/images/like.svg"}),(0,i.jsx)("div",{className:"programs",children:(0,i.jsxs)($,{children:[(0,i.jsx)("span",{children:"1"})," Reward Programs",(0,i.jsx)("span",{children:"1"})," Reward Programs",(0,i.jsx)("span",{children:"1"})," Reward Programs",(0,i.jsx)("span",{children:"1"})," Reward Programs",(0,i.jsx)("span",{children:"1"})," Reward Programs",(0,i.jsx)("span",{children:"1"})," Reward Programs"]})})]}),(0,i.jsxs)(u.HD,{className:"earn_item",children:[(0,i.jsx)(u.yw,{className:"top_btn",children:"Invite Bonus"}),(0,i.jsxs)(A,{children:["1,000,000",(0,i.jsx)("br",{}),"CRU"]}),(0,i.jsx)("div",{className:"left",children:(0,i.jsxs)(I,{children:["Invite friends to Crust",(0,i.jsx)("br",{}),"Files and earn ",(0,i.jsx)("span",{children:"CRU"}),".",(0,i.jsx)("br",{}),(0,i.jsx)(U,{target:"_blank",href:(0,v.$4)("/invite_bonus_guide"),children:"How to invite?"})]})}),(0,i.jsx)(E,{}),(0,i.jsxs)(S,{children:["Get ",(0,i.jsxs)("span",{children:[ep," CRU"]})," Reward"]}),(0,i.jsx)(M,{}),(0,i.jsxs)(P,{children:["Get ",(0,i.jsxs)("span",{children:[ef," CRU"]})," Discount on",(0,i.jsx)("br",{}),"Premium User Deposit"]}),(0,i.jsx)(D,{target:"_blank",href:(0,v.$4)("/docs/CrustFiles_ShareandEarn/#invite_bonus"),children:"Detailed Rules"})]}),(0,i.jsxs)(u.HD,{className:"earn_item",style:{display:"none"},children:[(0,i.jsx)(u.yw,{className:"top_btn",children:"Lucky Newbie"}),(0,i.jsxs)(A,{children:["500,000",(0,i.jsx)("br",{}),"CRU"]}),(0,i.jsxs)("div",{className:"left",children:[(0,i.jsxs)(O,{children:[(0,i.jsx)(p.KO,{})," 0 CRU"]}),(0,i.jsx)(F,{})]}),(0,i.jsxs)("div",{className:"right",children:[(0,i.jsx)("div",{className:"title",style:{marginBottom:8},children:"Congratulations!"}),"The first Newbie Prize of 15,000 CRU has been claimed by"," ",(0,i.jsx)("a",{target:"_blank",href:"".concat((0,v.$4)("/rewards_history/"),"?account=").concat(Q.account),rel:"noreferrer",children:"this lucky user"}),".",(0,i.jsx)("br",{}),"More exciting User Rewards Programs are coming soon...",(0,i.jsx)("div",{className:"footer"})]}),(0,i.jsx)(D,{target:"_blank",href:(0,v.$4)("/docs/CrustFiles_ShareandEarn/#lucky_newbie"),children:"Detailed Rules"})]}),!1,(0,i.jsxs)(u.HD,{className:"earn_item",style:{display:"none"},children:[(0,i.jsxs)(G,{children:[(0,i.jsx)("div",{className:"title",children:"My Rewards:"}),(0,i.jsxs)("div",{className:"sub",children:["Total Rewards: ",(0,i.jsx)("span",{children:(0,v.rd)(ea,"total.total")})," CRU (",(0,i.jsx)("span",{children:(0,v.rd)(ea,"total.claimed")})," CRU Claimed)",(0,i.jsx)("br",{}),"Invite Bonus: ",(0,i.jsx)("span",{children:(0,v.rd)(ea,"reward.total")})," CRU (",(0,i.jsx)("span",{children:(0,v.rd)(ea,"reward.claimed")})," CRU Claimed)",(0,i.jsx)("br",{}),"Lucky Newbie: ",(0,i.jsx)("span",{children:(0,v.rd)(ea,"depositReward.total")})," CRU (",(0,i.jsx)("span",{children:(0,v.rd)(ea,"depositReward.claimed")})," CRU Claimed)",(0,i.jsx)("br",{}),"Grand Draw: ",(0,i.jsx)("span",{children:(0,v.rd)(ea,"grandDraw.total")})," CRU (",(0,i.jsx)("span",{children:(0,v.rd)(ea,"grandDraw.claimed")})," CRU Claimed)"]}),X&&(0,i.jsx)(U,{style:{marginTop:"1rem"},target:"_blank",href:"".concat((0,v.$4)("/rewards_history/"),"?account=").concat(Q.account),children:"Check more detailed information & historical records about rewards"})]}),(0,i.jsx)(D,{target:"_blank",href:(0,v.$4)("/docs/CrustFiles_ShareandEarn/#claim_rewards"),children:"Learn More"})]})]})}).withConfig({componentId:"sc-56e3e03d-19"})([".share-and-earn{margin-bottom:2.29rem;border-radius:1.14rem;display:flex;align-items:center;justify-content:space-between;.text{font-size:3.43rem;line-height:4.64rem;font-weight:600;margin-right:4.29rem;span{color:var(--primary-color);}}.top_card{min-width:40.86rem;display:flex;flex-direction:column;align-items:center;color:black;.btns{z-index:2;position:relative;top:-12px;width:34rem;display:flex;div{width:50%;}}.total{font-weight:600;font-size:1.29rem;line-height:1.79rem;}.total_reward{span{color:#216cff;}font-weight:600;font-size:5.71rem;line-height:5.71rem;}.networks{width:28.57rem;font-size:1.29rem;line-height:2rem;font-weight:600;text-align:left;padding:3.7rem 0;span{float:right;color:#216cff;}}}}.earn_item{margin-top:5.21rem;width:100%;height:calc(100px + 11.93rem);display:flex;position:relative;.top_btn{cursor:default;position:absolute;top:0;left:calc(50% - 178px);}.left{width:27.64rem;display:flex;flex-direction:column;align-items:center;align-self:center;}.right{color:black;font-size:1.29rem;line-height:1.79rem;padding-top:3.57rem;.title{font-size:2.29rem;line-height:3.14rem;}.footer{margin-top:0.71rem;}span{color:#216cff;}}}@media screen and (max-width:1440px){.share-and-earn{.text{font-size:2.74rem;}}}"]))},93127:(e,r,t)=>{"use strict";t.d(r,{G:()=>i});let i=t(23472).Ay.span.attrs(e=>({color:e.color||"--primary-color"})).withConfig({componentId:"sc-645d36f9-0"})(["color:var(",");&.btn{cursor:pointer;&:disabled{cursor:not-allowed;}}"],e=>e.color)}},e=>{var r=r=>e(e.s=r);e.O(0,[3265,7426,5666,8770,3116,6059,8613,2317,4167,592,4638,1706,5269,3655,4161,9544,6209,8163,8320,1283,9290,7358],()=>r(39993)),_N_E=e.O()}]);